import{a as Le,b as Te,c as Ue}from"./chunk-C267R3UF.js";import"./chunk-HFZLJHYR.js";import{a as Oe,b as ke,d as E,g as Fe,h as Ie}from"./chunk-TTQ5IRBO.js";import{$b as O,$c as me,Ad as _e,Bb as l,Cd as g,Dd as fe,Ed as he,Fd as Ce,Gc as le,Gd as M,Ia as X,Id as ve,Ja as L,Kd as xe,Lb as oe,Ld as we,Ma as a,Nb as re,Nc as ce,Pb as q,Qa as Y,Qb as d,Rb as $,Sb as P,Ua as b,Va as ee,Vd as be,Za as B,ac as G,ad as de,ba as J,bd as U,ca as K,cd as pe,fa as h,fc as T,gb as p,gc as H,gd as F,hb as u,ib as te,id as _,ka as C,kb as ie,la as v,lb as ne,m as S,mb as c,md as ue,me as ye,nb as r,nc as ae,nd as ge,ne as Me,ob as s,pb as m,pe as Se,qe as Pe,r as z,tc as se,ua as Q,uc as y,wd as I,xb as w,zb as x}from"./chunk-AFPYJGSO.js";var N=class{static numberValidator(t){if(t.value==null||t.value==="")return null;let e=Number(t.value);return isNaN(e)?{invalidNumber:!0}:null}static greterThan(t){return e=>{let n=!isNaN(e.value),o=e.value>t;return n&&o?null:{invalidGreaterThan:!0,"invalidGreaterThan.message":`El valor debe ser mayor que ${t}`}}}static pattern(t,e,n="patterCustom"){return o=>o.value&&!o.value.match(t)?{[n]:!0,[n+".message"]:e}:null}static creditCardValidator(t){return t.value.match(/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/)?null:{invalidCreditCard:!0}}static emailValidator(t){return t.value.match(/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/)?null:{invalidEmailAddress:!0}}static passwordValidator(t){return t.value.match(/^(?=.*[0-9])[a-zA-Z0-9!@#$%^&*]{6,100}$/)?null:{invalidPassword:!0}}static onlyLetter(t){return t.value.match(/^[a-zA-ZáéíóúÁÉÍÓÚñÑ\s]*$/)?null:{invalidOnlyLetter:!0}}static feDocument=t=>t.value.match(/^[A-Z]\d{3}-\d+$/)?null:{errDoc:!0,"errDoc.message":"(Ej: A123-456)"}};var Ee=(i,t)=>({focus:i,"has-danger":t}),W=i=>({"animated tada":i});function De(i,t){if(i&1){let e=w();r(0,"div",1),m(1,"h4",6),r(2,"button",7),x("click",function(){C(e);let o=l();return v(o.close())}),s()()}}function Ve(i,t){i&1&&(r(0,"div",9),m(1,"img",12),s())}function je(i,t){i&1&&(r(0,"div",10),m(1,"img",13),s())}function ze(i,t){if(i&1&&m(0,"div",19),i&2){let e=l(2).$implicit;q(G("_box _sistema_",e.codigo)),c("innerHTML",e.descripcion,X)}}function Be(i,t){if(i&1&&(r(0,"div",16),B(1,ze,1,4,"ng-template",null,0,ae),r(3,"div",17),m(4,"img",18),s()()),i&2){let e=oe(2),n=l().$implicit;c("ngbTooltip",e),a(4),c("src",O(n.icono),L)}}function qe(i,t){i&1&&B(0,Be,5,3,"ng-template",15),i&2&&c("width",60)}function $e(i,t){if(i&1&&(r(0,"div",11)(1,"owl-carousel-o",14),ie(2,qe,1,1,null,15,te),s()()),i&2){let e=l(2);a(),c("options",e.customOptions),a(),ne(e.applications)}}function Ge(i,t){if(i&1&&(r(0,"div",3)(1,"div",8),p(2,Ve,2,0,"div",9),p(3,je,2,0,"div",10),s(),p(4,$e,4,1,"div",11),s()),i&2){let e=l();a(2),u(e.showLogo?2:-1),a(),u(e.showSuite()?3:-1),a(),u(e.showApp?4:-1)}}function He(i,t){if(i&1&&(r(0,"div",4)(1,"div",20)(2,"h1"),d(3,"Bienvenido"),s()(),r(4,"div",21)(5,"div"),m(6,"img",18),s(),r(7,"div")(8,"div"),d(9),s(),r(10,"div"),d(11),s()()(),r(12,"div",22),d(13," Estamos cargando su cuenta... "),r(14,"div",23),m(15,"div",24)(16,"div",25)(17,"div",26)(18,"div",27)(19,"div",28)(20,"div",29)(21,"div",30)(22,"div",31)(23,"div",32)(24,"div",33)(25,"div",34)(26,"div",35),s()()()),i&2){let e=l();a(6),c("src",O(e.user.personDetail==null||e.user.personDetail.person==null?null:e.user.personDetail.person.imgUrl),L),a(3),P(" ",e.user.personDetail==null||e.user.personDetail.person==null?null:e.user.personDetail.person.name," "),a(2),P(" ",e.user.personDetail==null||e.user.personDetail.person==null?null:e.user.personDetail.person.surname," ")}}function Ze(i,t){i&1&&(r(0,"div",36),d(1,"\xBFNuevo aqu\xED? "),r(2,"a",51),d(3,"Reg\xEDstrate ahora"),s()())}function We(i,t){if(i&1){let e=w();r(0,"div",46)(1,"label",52),d(2,"Usuario"),s(),r(3,"div",40)(4,"div",53)(5,"div",54)(6,"div",55)(7,"div",56),m(8,"img",18),s(),r(9,"div",57)(10,"div",58),d(11),s(),r(12,"div",59),d(13),s()()()(),r(14,"div",60),x("click",function(){C(e);let o=l(2);return v(o.noes())}),m(15,"i",61),s()()()()}if(i&2){let e=l(2);a(8),c("src",e.account.imgUrl,L),a(3),$(e.account.name),a(2),$(e.account.surname)}}function Je(i,t){if(i&1){let e=w();r(0,"div",65),x("click",function(){C(e);let o=l(3);return v(o.toggle())}),m(1,"i",66),s()}if(i&2){let e=l(3);a(),c("ngClass",T(1,W,e.fainput.password))}}function Ke(i,t){if(i&1){let e=w();r(0,"div",67),x("click",function(){C(e);let o=l(3);return v(o.toggle())}),m(1,"i",68),s()}if(i&2){let e=l(3);a(),c("ngClass",T(1,W,e.fainput.password))}}function Qe(i,t){if(i&1){let e=w();r(0,"div",46)(1,"label",52),d(2,"Contrase\xF1a"),s(),r(3,"div",40)(4,"div",41)(5,"input",62),x("focus",function(){C(e);let o=l(2);return v(o.ffocus(!0,2))})("blur",function(){C(e);let o=l(2);return v(o.ffocus(!1,2))}),s(),p(6,Je,2,3,"div",63)(7,Ke,2,3,"div",64),s(),m(8,"app-control-messages",45),s()()}if(i&2){let e=l(2);a(4),c("ngClass",H(6,Ee,e.fainput.password,e.passwordControl.invalid&&(e.passwordControl.touched||e.submit))),a(),c("type",O(e.passwordType)),a(),u(e.passwordShow?6:7),a(2),c("show",e.submit)("control",e.passwordControl)}}function Xe(i,t){if(i&1&&(r(0,"div",46)(1,"div")(2,"div",69),d(3),s()()()),i&2){let e=l(2);a(3),P(" ",e.error_message," ")}}function Ye(i,t){i&1&&(r(0,"div",46)(1,"div",40)(2,"div")(3,"a",70),d(4,"\xBFOlvidaste tu cuenta?"),s()()()(),r(5,"div")(6,"div",71)(7,"div")(8,"a",72),d(9,"\xBFNo lleg\xF3 el correo de confirmaci\xF3n?"),s()()()())}function et(i,t){if(i&1&&(r(0,"button",49),d(1),s()),i&2){let e=l(2);a(),P(" ",e.panel()==2?"Iniciar sesi\xF3n":"Siguiente"," ")}}function tt(i,t){i&1&&(r(0,"button",50)(1,"div",23),m(2,"div",24)(3,"div",25)(4,"div",26)(5,"div",27)(6,"div",28)(7,"div",29)(8,"div",30)(9,"div",31)(10,"div",32)(11,"div",33)(12,"div",34)(13,"div",35),s(),r(14,"span"),d(15,"Cargando..."),s()())}function it(i,t){if(i&1){let e=w();r(0,"div",5)(1,"h1",20),d(2,"Iniciar sesi\xF3n"),s(),r(3,"div"),p(4,Ze,4,0,"div",36),r(5,"form",37),x("submit",function(){C(e);let o=l();return v(o.acceder())}),r(6,"div",38)(7,"label",39),d(8),s(),r(9,"div",40)(10,"div",41)(11,"input",42),x("focus",function(){C(e);let o=l();return v(o.ffocus(!0,1))})("blur",function(){C(e);let o=l();return v(o.ffocus(!1,1))}),s(),r(12,"div",43),m(13,"i",44),s()(),m(14,"app-control-messages",45),s()(),p(15,We,16,3,"div",46),p(16,Qe,9,9,"div",46),p(17,Xe,4,1,"div",46),p(18,Ye,10,0),r(19,"div",47)(20,"div",48),p(21,et,2,1,"button",49)(22,tt,16,0,"button",50),s()()()()()}if(i&2){let e=l();a(4),u(e.showOptions()?4:-1),a(),c("formGroup",e.userForm),a(),c("hidden",e.panel()==2&&e.complete()),a(2),P(" ",e.labelUser," "),a(2),c("ngClass",H(18,Ee,e.fainput.username,e.username_usuarioControl.invalid&&(e.username_usuarioControl.touched||e.submit))),a(),c("placeholder",O(e.placeholderUser)),a(2),q(G("icon ",e.iconUser)),c("ngClass",T(21,W,e.fainput.username)),a(),c("show",e.submit)("control",e.username_usuarioControl),a(),u(e.panel()==2&&e.complete()?15:-1),a(),u(e.panel()==2?16:-1),a(),u(e.error_message!=""?17:-1),a(),u(e.showOptions()?18:-1),a(3),u(e.loading?22:21)}}var A=class i{constructor(t){this.modalActive=t;this.checkUserColorScheme()=="dark"&&document.querySelector("body")?.classList.add("fdark")}complete=y(!0);showApp=!0;rolAll=y(!0);showLogo=!0;showSuite=y(!0);isModal=y(!1);showOptions=y(!1);typeUser=y("email");event=se();userForm=new Ce({username_usuario:new M("",{validators:[g.required,g.maxLength(50),N.emailValidator],nonNullable:!0})});panel=Q(1);fainput={username:!1,password:!1};applications=[];API=`${_.portal}/institution/apps`;apiService=h(ue);router=h(U);customOptions={autoplay:!0,autoWidth:!0,dots:!1,loop:!0};authService=h(I);modalService=h(Me);get username_usuarioControl(){return this.userForm.get("username_usuario")}get passwordControl(){return this.userForm.get("password_usuario")}aplicacion={};show=!1;labelUser="Correo electr\xF3nico";placeholderUser="Ingrese su correo electr\xF3nico";iconUser="ion-md-at";ngOnInit(){return S(this,null,function*(){switch(this.typeUser()){case"dni":this.labelUser="Numero de DNI",this.placeholderUser="Ingrese su numero de DNI",this.iconUser="ion-md-card",this.userForm.setControl("username_usuario",new M("",{validators:[g.required,g.maxLength(8),g.minLength(8)],nonNullable:!0}));break;case"document":this.labelUser="Numero de documento",this.placeholderUser="Ingrese su numero de documento",this.iconUser="ion-md-card",this.userForm.setControl("username_usuario",new M("",{validators:[g.required,g.maxLength(10),g.minLength(8)],nonNullable:!0}));break}if(this.complete()){if(this.authService.getCuentas(),this.accounts=this.authService.cuentas,this.accounts.length){let t=this.accounts.length;this.selectUser(this.accounts[t-1],!0)}}else this.userForm.addControl("password_usuario",new M("",{validators:[g.required,g.maxLength(50)],nonNullable:!0})),this.panel.set(2),setTimeout(()=>{document.getElementById("username")?.focus()},200);if(this.applications=[],this.showApp){let t=yield this.apiService.getPrivate(`${this.API}`,{idinstitution:_.idinstitucion});t.state=="success"&&(t.data??[]).forEach(n=>{n.application&&this.applications.push(n.application)})}})}selectUser(t,e){this.account=t,this.userForm.patchValue({username_usuario:t.username}),e&&(this.userForm.addControl("password_usuario",new M("",{validators:[g.required,g.maxLength(50)],nonNullable:!0})),this.panel.set(2)),setTimeout(()=>{document.getElementById("password")?.focus()},200)}loading=!1;ffocus(t,e){e==1?this.fainput.username=t:this.fainput.password=t}error_message="";submit=!1;user={};noes(){this.userForm.removeControl("password_usuario"),this.error_message="",this.panel.set(1),this.account={idinstitucion:"",imgUrl:"",name:"",surname:"",username:""},this.userForm.reset(),setTimeout(()=>{document.getElementById("username")?.focus()},200)}recuperarBox(){}error=!1;accounts=[];account={idinstitucion:"",imgUrl:"",name:"",surname:"",username:""};acceder(){return S(this,null,function*(){if(this.submit=!0,this.error_message="",!this.userForm.valid)return;this.submit=!1,this.loading=!0,this.error=!1;let t=this.userForm.value;this.panel()==2&&this.complete()&&(t.username_usuario=this.account.username);let e={idinstitucion:_.idinstitucion,username_usuario:t.username_usuario,password_usuario:t.password_usuario??"",sistema:_.isMultipleSystem?"":_.sistema,ip:"",platform:"web",panel:this.panel()},n=yield this.authService.login(e);if(this.loading=!1,n.state=="success"&&n.data){if(n.data.code!="SI"){this.error=!0,this.error_message=n.message?n.message:"";return}if(n.data.user)if(this.user=n.data.user,this.panel()==1)this.account={idinstitucion:this.user.idinstitucion+"",imgUrl:this.user.personDetail?.person?.imgUrl,name:this.user.personDetail?.person?.name,surname:this.user.personDetail?.person?.surname,username:this.user.username},this.authService.setCuentas(this.account),this.userForm.addControl("password_usuario",new M("",{validators:[g.required,g.maxLength(50),g.minLength(5)],nonNullable:!0})),this.panel.set(2),setTimeout(()=>{document.getElementById("password")?.focus()},200);else{let o=n.data.roles||[];if(o.forEach(f=>{f.system===""&&(f.system="suite")}),!this.rolAll()&&!_.isMultipleSystem&&(o=o.filter(f=>f.system==_.sistema)),_.isMultipleSystem&&_.systems.length&&(o=o.filter(f=>_.systems.includes(f.system))),o.length==0){this.error_message="No tiene acceso a este sistema.",this.loading=!1;return}this.error_message="Accediendo...",this.authService.setUserToken({roles:o,user:n.data.user},n.data.token),console.log("roles"),console.log(o),o&&this.openRoles(o)}}})}openRoles(t){return S(this,null,function*(){if(t.length==0){alert("No tiene acceso a ningun modulo del sistema");return}if(t.length==1){let o=t[0];try{_.isMultipleSystem?yield this.router.navigate([o.system,o.rol],{queryParams:{r:o.id}}):yield this.router.navigate([o.rol],{queryParams:{r:o.id}}),this.reenviar(this.user,t[0])}catch(f){console.log("error",f)}return}let e=!1,n;do try{let o=this.modalService.open(E,{backdrop:"static",keyboard:!1}),f=o.componentInstance;if(f.roles=t,n=yield o.result,n)try{_.isMultipleSystem?(console.log([n.system,n.rol]),yield this.router.navigate([n.system,n.rol],{queryParams:{r:n.id}})):yield this.router.navigate([n.rol],{queryParams:{r:n.id}})}catch(Re){console.log("error",Re),e=!0}}catch(o){o==="otro"?this.noes():e=!0}while(e);n&&this.reenviar(this.user,n)})}reenviar(t,e){if(this.isModal()){let n={user:t,rolSetected:e};this.modalActive.close(n)}else this.event.emit({user:this.user,rolSetected:e})}passwordShow=!1;passwordType="password";toggle(){this.passwordShow=!this.passwordShow,this.passwordType=this.passwordShow?"text":"password",setTimeout(()=>{document.getElementById("password")?.focus()},200)}close(){this.modalActive.dismiss()}checkUserColorScheme(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?"light":null}static \u0275fac=function(e){return new(e||i)(Y(ye,8))};static \u0275cmp=b({type:i,selectors:[["app-login"]],inputs:{complete:[1,"complete"],showApp:"showApp",rolAll:[1,"rolAll"],showLogo:"showLogo",showSuite:[1,"showSuite"],isModal:[1,"isModal"],showOptions:[1,"showOptions"],typeUser:[1,"typeUser"]},outputs:{event:"event"},decls:7,vars:5,consts:[["tipContent",""],[1,"modal-header"],[1,"position-relative"],[1,"header"],[1,"p-5"],[1,"box-main","px-4","py-5","_box_main"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],[1,"__header","box-main"],[1,"_institucion"],[1,"_sistema"],[1,"_aplicaciones"],["src","assets/img/logo-institucion.png","alt",""],["src","assets/img/logo-horizontal.png","alt",""],[3,"options"],["carouselSlide","",3,"width"],["placement","top","container","body",1,"carousel-cell",3,"ngbTooltip"],[1,"aplicacion"],["alt","",3,"src"],[3,"innerHTML"],[1,"text-center","mb-4"],[1,"_user","bg-card"],[1,"mensaje_cargando"],[1,"sk-fading-circle","sm"],[1,"sk-circle1","sk-circle"],[1,"sk-circle2","sk-circle"],[1,"sk-circle3","sk-circle"],[1,"sk-circle4","sk-circle"],[1,"sk-circle5","sk-circle"],[1,"sk-circle6","sk-circle"],[1,"sk-circle7","sk-circle"],[1,"sk-circle8","sk-circle"],[1,"sk-circle9","sk-circle"],[1,"sk-circle10","sk-circle"],[1,"sk-circle11","sk-circle"],[1,"sk-circle12","sk-circle"],[1,"_nuevo"],[1,"",3,"submit","formGroup"],[1,"form-group","box-input-user",3,"hidden"],["for","username",1,"control-label"],[1,""],[1,"_input-group",3,"ngClass"],["type","email","autofocus","","formControlName","username_usuario","id","username",1,"form-control",3,"focus","blur","placeholder"],["placement","top","ngbTooltip","Cuentas",1,"_icons"],[3,"ngClass"],[3,"show","control"],[1,"form-group"],[1,"_opciones"],[1,"text-center","mt-3"],["type","submit","app-button","","size","lg",1,""],["type","button","app-button","","size","lg",1,"btn-loading"],["routerLink","/registro/estudiante",1,"ml-1"],["for","password",1,"control-label"],[1,"_input-group",2,"align-items","center"],[1,"flex-grow-1","position-relative"],[1,"user",2,"padding-right","40px"],[1,"avatar"],[1,"flex-grow-1","_datos"],[1,"text-truncate","_nombre","mb-1"],[1,"text-truncate","_nombre"],["placement","top","ngbTooltip","Otra cuenta",1,"_icons",3,"click"],[1,"icon","ion-md-close"],["id","password","formControlName","password_usuario",1,"form-control",3,"focus","blur","type"],["placement","top","ngbTooltip","Ocultar contrase\xF1a",1,"_icons"],["placement","top","ngbTooltip","Mostrar contrase\xF1a",1,"_icons"],["placement","top","ngbTooltip","Ocultar contrase\xF1a",1,"_icons",3,"click"],[1,"icon","ion-md-eye-off",3,"ngClass"],["placement","top","ngbTooltip","Mostrar contrase\xF1a",1,"_icons",3,"click"],[1,"icon","ion-md-eye",3,"ngClass"],[1,"_nota","mt-0","red"],["title","Reestablecer tu contrase\xF1a","routerLink","/recuperar",1,"opciones","text-primary"],[1,"form-group","mt-3"],["title","Correo de confirmaci\xF3n","routerLink","/correo/confirmacion",1,"opciones","text-primary"]],template:function(e,n){e&1&&(p(0,De,3,0,"div",1),r(1,"div")(2,"div",2),p(3,Ge,5,3,"div",3),r(4,"div"),p(5,He,27,4,"div",4)(6,it,23,23,"div",5),s()()()),e&2&&(u(n.isModal()?0:-1),a(3),u(n.showLogo||n.showSuite()||n.showApp?3:-1),a(),re("mt-3",!n.showApp&&!n.isModal()),a(),u(n.error_message=="Accediendo..."?5:6))},dependencies:[be,ve,_e,fe,he,xe,we,le,Oe,Ue,Te,Le,Pe,Se,pe,ke,Fe],styles:[".form-control[_ngcontent-%COMP%]{font-size:15px;height:auto}.__header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:fit-content;margin:auto;padding:.5rem}.__header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:60px}label[_ngcontent-%COMP%]{margin-bottom:5px}._nombre[_ngcontent-%COMP%]{max-width:300px}.btn-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background:#fff;position:relative;z-index:9!important;border:1px solid rgba(0,0,0,.07);display:block;width:44px;height:44px;font-size:25px;line-height:44px;border-radius:50%}.btn-input[_ngcontent-%COMP%]   i.animated[_ngcontent-%COMP%]{background:#4b83fe;color:#fff}.btn-input[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]:hover{background:#4b83fe;cursor:pointer;color:#fff;border-color:#4b83fe}.btn-loading[_ngcontent-%COMP%]{display:flex;align-items:center;margin:auto}.btn-loading[_ngcontent-%COMP%]   .sk-fading-circle[_ngcontent-%COMP%]{margin:0 10px 0 0;width:20px;height:20px}.btn-loading[_ngcontent-%COMP%]   .sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]:before{background:#fff}.user[_ngcontent-%COMP%]{display:flex;align-items:center;padding:3px 7px;gap:1rem}.user[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:42px;height:42px;border-radius:50%}.user[_ngcontent-%COMP%]   ._datos[_ngcontent-%COMP%]{line-height:1}._user[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:20px;border:1px solid #eaeaea;padding:10px 20px;border-radius:20px}._user[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100px;border-radius:50%;margin-right:10px}.mensaje_cargando[_ngcontent-%COMP%]{margin-top:30px;color:#0778e9;font-weight:700;display:flex;justify-content:space-around;align-items:center}.mensaje_cargando[_ngcontent-%COMP%]   .sk-fading-circle[_ngcontent-%COMP%]{margin:0;margin-left:1rem}.mensaje_cargando[_ngcontent-%COMP%]   .sk-fading-circle[_ngcontent-%COMP%]   .sk-circle[_ngcontent-%COMP%]:before{background-color:#0778e9}._box_main[_ngcontent-%COMP%]{min-width:420px}._nota[_ngcontent-%COMP%]{max-width:700px}h1[_ngcontent-%COMP%]{line-height:1;font-size:2.2rem;margin:0}.otro[_ngcontent-%COMP%]{text-align:center}.aplicaciones[_ngcontent-%COMP%]{display:flex;gap:.5rem;max-width:500px;padding:.5rem 0;overflow:visible;flex-wrap:wrap}.aplicacion[_ngcontent-%COMP%]{background:#fff;border-radius:50%;overflow:auto;width:50px;height:50px;min-width:50px;display:flex;align-items:center;justify-content:center;--tw-shadow: 0 1px 3px 0 rgb(0 0 0 / .1), 0 1px 2px -1px rgb(0 0 0 / .1) !important;--tw-shadow-colored: 0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color) !important;box-shadow:var(--tw-ring-offset-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-ring-shadow, 0 0 rgba(0, 0, 0, 0)),var(--tw-shadow)!important}.aplicacion[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:32px!important}._aplicaciones[_ngcontent-%COMP%]{margin-top:1rem;margin-bottom:1rem}._aplicaciones[_ngcontent-%COMP%]   carousel[_ngcontent-%COMP%]{margin:auto;z-index:9!important}@media (max-width: 768px){._box_main[_ngcontent-%COMP%]{min-width:inherit;margin:0 .5rem}}.logo._box_main[_ngcontent-%COMP%]{display:flex;align-items:center;margin:auto;width:fit-content;min-width:auto}.logo._box_main[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]{margin-right:10px}.logo._box_main[_ngcontent-%COMP%]   .img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:40px;max-width:40px;width:100%;margin:.3rem 0}owl-carousel-o[_ngcontent-%COMP%]{width:350px;display:block;margin:auto}.carousel-cell[_ngcontent-%COMP%]{margin-bottom:1px}.header[_ngcontent-%COMP%]{position:absolute;width:100%;top:-150px}.modal-header[_ngcontent-%COMP%]{border:none;background:transparent;padding:0;z-index:1}.opciones[_ngcontent-%COMP%]{font-size:13px}._nuevo[_ngcontent-%COMP%]{font-size:1.1em;font-weight:700;margin:15px 0;text-align:center}._input-group[_ngcontent-%COMP%]{position:relative}._input-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{padding-top:.75rem;padding-bottom:.75rem;padding-right:40px}._icons[_ngcontent-%COMP%]{position:absolute;right:5px;top:0;font-size:1.75rem;line-height:1;height:100%;display:flex;align-items:center;justify-content:center;width:35px;cursor:pointer;color:#767676}._icons[_ngcontent-%COMP%]:hover{color:#040404}"]})};var R=class i{idcaja="";caja={id:0};emitir=new z("");emitirFe=new z("");constructor(){}reset(){this.idcaja="",this.caja={id:0}}static \u0275fac=function(e){return new(e||i)};static \u0275prov=J({token:i,factory:i.\u0275fac,providedIn:"root"})};var D=class i{cashier=h(R);eventLogin(t){this.cashier.reset()}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-login-page"]],decls:5,vars:1,consts:[[1,"container"],[1,"row","justify-content-center","align-items-center"],[1,"col-12","col-md-6"],[1,"_panel"],[3,"event","rolAll"]],template:function(e,n){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"app-login",4),x("event",function(f){return n.eventLogin(f)}),s()()()()()),e&2&&(a(4),c("rolAll",!1))},dependencies:[A],styles:["._panel[_ngcontent-%COMP%]{height:100vh;display:flex;justify-content:center;align-items:center}img[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{color:#ff9800;font-weight:700}.description[_ngcontent-%COMP%]{font-size:1.25rem}"]})};var V=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-home"]],decls:1,vars:0,template:function(e,n){e&1&&m(0,"router-outlet")},dependencies:[F,de],encapsulation:2})};function nt(i,t){if(i&1){let e=w();r(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-rol-select",3),x("evento",function(o){C(e);let f=l();return v(f.selectRol(o))}),s()()()()}if(i&2){let e=l();a(3),c("isModal",!1)("roles",e.roles)}}function ot(i,t){i&1&&m(0,"app-loading")}var j=class i{authService=h(I);router=h(U);activatedRoute=h(me);LS=h(ge);roles=[];show=!1;ngOnInit(){this.activatedRoute.params.subscribe(t=>{if(console.log(t),t.token){let e=t.token;this.LS.set("token",e),this.getSesion(e)}})}loading=!0;getSesion(t){return S(this,null,function*(){console.log(t),this.loading=!0;let e=yield this.authService.isAuthenticated(void 0,t);if(this.loading=!1,e.state!="success"){this.router.parseUrl("/login");return}if(!e.data){this.router.parseUrl("/login");return}if(!e.data.user){this.router.parseUrl("/login");return}let n=e.data.user;n&&(this.authService.setUserToken({roles:e.data.roles,user:n},t),this.roles=this.authService.roles(),this.show=!0)})}selectRol(t){_.isMultipleSystem?this.router.navigate([`/${t.system}/`+t.rol+"/bienvenido"]):this.router.navigate(["/"+t.rol+"/bienvenido"])}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=b({type:i,selectors:[["app-rol-select-page"]],decls:3,vars:2,consts:[[1,"container","py-4"],[1,"row","justify-content-center"],[1,"col-6"],[3,"evento","isModal","roles"]],template:function(e,n){e&1&&(r(0,"section"),p(1,nt,4,2,"div",0),p(2,ot,1,0,"app-loading"),s()),e&2&&(a(),u(n.show?1:-1),a(),u(n.loading?2:-1))},dependencies:[Ie,E],encapsulation:2})};var Ne=[{path:"",component:V,children:[{path:"",pathMatch:"full",redirectTo:"login"},{path:"login",component:D},{path:"roles/:token",component:j}]}];var Ae=class i{static \u0275fac=function(e){return new(e||i)};static \u0275mod=ee({type:i});static \u0275inj=K({imports:[ce,F.forChild(Ne)]})};export{Ae as HomeModule};
