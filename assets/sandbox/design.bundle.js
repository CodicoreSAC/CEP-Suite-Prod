"use strict";(()=>{var St,E,ze,re,it,Ne,Fe,$e,Oe,oe,ee,ne,Ue,wt={},We=[],mi=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Et=Array.isArray;function K(t,e){for(var n in e)t[n]=e[n];return t}function se(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function $(t,e,n){var i,o,r,s={};for(r in e)r=="key"?i=e[r]:r=="ref"?o=e[r]:s[r]=e[r];if(arguments.length>2&&(s.children=arguments.length>3?St.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(r in t.defaultProps)s[r]===void 0&&(s[r]=t.defaultProps[r]);return xt(t,s,i,o,null)}function xt(t,e,n,i,o){var r={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++ze,__i:-1,__u:0};return o==null&&E.vnode!=null&&E.vnode(r),r}function P(t){return t.children}function tt(t,e){this.props=t,this.context=e}function ft(t,e){if(e==null)return t.__?ft(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ft(t):null}function Ve(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Ve(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&it.push(t)&&!It.__r++||Ne!==E.debounceRendering)&&((Ne=E.debounceRendering)||Fe)(It)}function It(){for(var t,e,n,i,o,r,s,a=1;it.length;)it.length>a&&it.sort($e),t=it.shift(),a=it.length,t.__d&&(n=void 0,o=(i=(e=t).__v).__e,r=[],s=[],e.__P&&((n=K({},i)).__v=i.__v+1,E.vnode&&E.vnode(n),ae(e.__P,n,i,e.__n,e.__P.namespaceURI,32&i.__u?[o]:null,r,o??ft(i),!!(32&i.__u),s),n.__v=i.__v,n.__.__k[n.__i]=n,Xe(r,n,s),n.__e!=o&&Ve(n)));It.__r=0}function Be(t,e,n,i,o,r,s,a,c,u,f){var l,d,p,m,b,v,g=i&&i.__k||We,y=e.length;for(c=gi(n,e,g,c,y),l=0;l<y;l++)(p=n.__k[l])!=null&&(d=p.__i===-1?wt:g[p.__i]||wt,p.__i=l,v=ae(t,p,d,o,r,s,a,c,u,f),m=p.__e,p.ref&&d.ref!=p.ref&&(d.ref&&le(d.ref,null,p),f.push(p.ref,p.__c||m,p)),b==null&&m!=null&&(b=m),4&p.__u||d.__k===p.__k?c=Ge(p,c,t):typeof p.type=="function"&&v!==void 0?c=v:m&&(c=m.nextSibling),p.__u&=-7);return n.__e=b,c}function gi(t,e,n,i,o){var r,s,a,c,u,f=n.length,l=f,d=0;for(t.__k=new Array(o),r=0;r<o;r++)(s=e[r])!=null&&typeof s!="boolean"&&typeof s!="function"?(c=r+d,(s=t.__k[r]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?xt(null,s,null,null,null):Et(s)?xt(P,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?xt(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,a=null,(u=s.__i=vi(s,n,c,l))!==-1&&(l--,(a=n[u])&&(a.__u|=2)),a==null||a.__v===null?(u==-1&&(o>f?d--:o<f&&d++),typeof s.type!="function"&&(s.__u|=4)):u!=c&&(u==c-1?d--:u==c+1?d++:(u>c?d--:d++,s.__u|=4))):t.__k[r]=null;if(l)for(r=0;r<f;r++)(a=n[r])!=null&&(2&a.__u)==0&&(a.__e==i&&(i=ft(a)),Ye(a,a));return i}function Ge(t,e,n){var i,o;if(typeof t.type=="function"){for(i=t.__k,o=0;i&&o<i.length;o++)i[o]&&(i[o].__=t,e=Ge(i[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=ft(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function zt(t,e){return e=e||[],t==null||typeof t=="boolean"||(Et(t)?t.some(function(n){zt(n,e)}):e.push(t)),e}function vi(t,e,n,i){var o,r,s=t.key,a=t.type,c=e[n];if(c===null&&t.key==null||c&&s==c.key&&a===c.type&&(2&c.__u)==0)return n;if(i>(c!=null&&(2&c.__u)==0?1:0))for(o=n-1,r=n+1;o>=0||r<e.length;){if(o>=0){if((c=e[o])&&(2&c.__u)==0&&s==c.key&&a===c.type)return o;o--}if(r<e.length){if((c=e[r])&&(2&c.__u)==0&&s==c.key&&a===c.type)return r;r++}}return-1}function ke(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||mi.test(e)?n:n+"px"}function kt(t,e,n,i,o){var r;t:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||ke(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||ke(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")r=e!=(e=e.replace(Oe,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+r]=n,n?i?n.t=i.t:(n.t=oe,t.addEventListener(e,r?ne:ee,r)):t.removeEventListener(e,r?ne:ee,r);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break t}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ie(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.u==null)e.u=oe++;else if(e.u<n.t)return;return n(E.event?E.event(e):e)}}}function ae(t,e,n,i,o,r,s,a,c,u){var f,l,d,p,m,b,v,g,y,x,w,S,C,k,W,X,dt,j=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),r=[a=e.__e=n.__e]),(f=E.__b)&&f(e);t:if(typeof j=="function")try{if(g=e.props,y="prototype"in j&&j.prototype.render,x=(f=j.contextType)&&i[f.__c],w=f?x?x.props.value:f.__:i,n.__c?v=(l=e.__c=n.__c).__=l.__E:(y?e.__c=l=new j(g,w):(e.__c=l=new tt(g,w),l.constructor=j,l.render=yi),x&&x.sub(l),l.props=g,l.state||(l.state={}),l.context=w,l.__n=i,d=l.__d=!0,l.__h=[],l._sb=[]),y&&l.__s==null&&(l.__s=l.state),y&&j.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=K({},l.__s)),K(l.__s,j.getDerivedStateFromProps(g,l.__s))),p=l.props,m=l.state,l.__v=e,d)y&&j.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),y&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(y&&j.getDerivedStateFromProps==null&&g!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(g,w),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(g,l.__s,w)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(l.props=g,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(Q){Q&&(Q.__=e)}),S=0;S<l._sb.length;S++)l.__h.push(l._sb[S]);l._sb=[],l.__h.length&&s.push(l);break t}l.componentWillUpdate!=null&&l.componentWillUpdate(g,l.__s,w),y&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,m,b)})}if(l.context=w,l.props=g,l.__P=t,l.__e=!1,C=E.__r,k=0,y){for(l.state=l.__s,l.__d=!1,C&&C(e),f=l.render(l.props,l.state,l.context),W=0;W<l._sb.length;W++)l.__h.push(l._sb[W]);l._sb=[]}else do l.__d=!1,C&&C(e),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++k<25);l.state=l.__s,l.getChildContext!=null&&(i=K(K({},i),l.getChildContext())),y&&!d&&l.getSnapshotBeforeUpdate!=null&&(b=l.getSnapshotBeforeUpdate(p,m)),X=f,f!=null&&f.type===P&&f.key==null&&(X=je(f.props.children)),a=Be(t,Et(X)?X:[X],e,n,i,o,r,s,a,c,u),l.base=e.__e,e.__u&=-161,l.__h.length&&s.push(l),v&&(l.__E=l.__=null)}catch(Q){if(e.__v=null,c||r!=null)if(Q.then){for(e.__u|=c?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;r[r.indexOf(a)]=null,e.__e=a}else for(dt=r.length;dt--;)se(r[dt]);else e.__e=n.__e,e.__k=n.__k;E.__e(Q,e,n)}else r==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):a=e.__e=_i(n.__e,e,n,i,o,r,s,c,u);return(f=E.diffed)&&f(e),128&e.__u?void 0:a}function Xe(t,e,n){for(var i=0;i<n.length;i++)le(n[i],n[++i],n[++i]);E.__c&&E.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(r){r.call(o)})}catch(r){E.__e(r,o.__v)}})}function je(t){return typeof t!="object"||t==null?t:Et(t)?t.map(je):K({},t)}function _i(t,e,n,i,o,r,s,a,c){var u,f,l,d,p,m,b,v=n.props,g=e.props,y=e.type;if(y=="svg"?o="http://www.w3.org/2000/svg":y=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),r!=null){for(u=0;u<r.length;u++)if((p=r[u])&&"setAttribute"in p==!!y&&(y?p.localName==y:p.nodeType==3)){t=p,r[u]=null;break}}if(t==null){if(y==null)return document.createTextNode(g);t=document.createElementNS(o,y,g.is&&g),a&&(E.__m&&E.__m(e,r),a=!1),r=null}if(y===null)v===g||a&&t.data===g||(t.data=g);else{if(r=r&&St.call(t.childNodes),v=n.props||wt,!a&&r!=null)for(v={},u=0;u<t.attributes.length;u++)v[(p=t.attributes[u]).name]=p.value;for(u in v)if(p=v[u],u!="children"){if(u=="dangerouslySetInnerHTML")l=p;else if(!(u in g)){if(u=="value"&&"defaultValue"in g||u=="checked"&&"defaultChecked"in g)continue;kt(t,u,null,p,o)}}for(u in g)p=g[u],u=="children"?d=p:u=="dangerouslySetInnerHTML"?f=p:u=="value"?m=p:u=="checked"?b=p:a&&typeof p!="function"||v[u]===p||kt(t,u,p,v[u],o);if(f)a||l&&(f.__html===l.__html||f.__html===t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(l&&(t.innerHTML=""),Be(e.type==="template"?t.content:t,Et(d)?d:[d],e,n,i,y=="foreignObject"?"http://www.w3.org/1999/xhtml":o,r,s,r?r[0]:n.__k&&ft(n,0),a,c),r!=null)for(u=r.length;u--;)se(r[u]);a||(u="value",y=="progress"&&m==null?t.removeAttribute("value"):m!==void 0&&(m!==t[u]||y=="progress"&&!m||y=="option"&&m!==v[u])&&kt(t,u,m,v[u],o),u="checked",b!==void 0&&b!==t[u]&&kt(t,u,b,v[u],o))}return t}function le(t,e,n){try{if(typeof t=="function"){var i=typeof t.__u=="function";i&&t.__u(),i&&e==null||(t.__u=t(e))}else t.current=e}catch(o){E.__e(o,n)}}function Ye(t,e,n){var i,o;if(E.unmount&&E.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||le(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(r){E.__e(r,e)}i.base=i.__P=null}if(i=t.__k)for(o=0;o<i.length;o++)i[o]&&Ye(i[o],e,n||typeof t.type!="function");n||se(t.__e),t.__c=t.__=t.__e=void 0}function yi(t,e,n){return this.constructor(t,n)}function Ft(t,e,n){var i,o,r,s;e==document&&(e=document.documentElement),E.__&&E.__(t,e),o=(i=typeof n=="function")?null:n&&n.__k||e.__k,r=[],s=[],ae(e,t=(!i&&n||e).__k=$(P,null,[t]),o||wt,wt,e.namespaceURI,!i&&n?[n]:o?null:e.firstChild?St.call(e.childNodes):null,r,!i&&n?n:o?o.__e:e.firstChild,i,s),Xe(r,t,s)}function qe(t,e,n){var i,o,r,s,a=K({},t.props);for(r in t.type&&t.type.defaultProps&&(s=t.type.defaultProps),e)r=="key"?i=e[r]:r=="ref"?o=e[r]:a[r]=e[r]===void 0&&s!==void 0?s[r]:e[r];return arguments.length>2&&(a.children=arguments.length>3?St.call(arguments,2):n),xt(t.type,a,i||t.key,o||t.ref,null)}function Ke(t){function e(n){var i,o;return this.getChildContext||(i=new Set,(o={})[e.__c]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){i=null},this.shouldComponentUpdate=function(r){this.props.value!==r.value&&i.forEach(function(s){s.__e=!0,ie(s)})},this.sub=function(r){i.add(r);var s=r.componentWillUnmount;r.componentWillUnmount=function(){i&&i.delete(r),s&&s.call(r)}}),n.children}return e.__c="__cC"+Ue++,e.__=t,e.Provider=e.__l=(e.Consumer=function(n,i){return n.children(i)}).contextType=e,e}St=We.slice,E={__e:function(t,e,n,i){for(var o,r,s;e=e.__;)if((o=e.__c)&&!o.__)try{if((r=o.constructor)&&r.getDerivedStateFromError!=null&&(o.setState(r.getDerivedStateFromError(t)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,i||{}),s=o.__d),s)return o.__E=o}catch(a){t=a}throw t}},ze=0,re=function(t){return t!=null&&t.constructor==null},tt.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=K({},this.state),typeof t=="function"&&(t=t(K({},n),this.props)),t&&K(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},tt.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},tt.prototype.render=P,it=[],Fe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,$e=function(t,e){return t.__v.__b-e.__v.__b},It.__r=0,Oe=/(PointerCapture)$|Capture$/i,oe=0,ee=Ie(!1),ne=Ie(!0),Ue=0;var Ct,H,ce,Je,Mt=0,sn=[],A=E,Ze=A.__b,Qe=A.__r,tn=A.diffed,en=A.__c,nn=A.unmount,rn=A.__;function de(t,e){A.__h&&A.__h(H,t,Mt||e),Mt=0;var n=H.__H||(H.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function z(t){return Mt=1,bi(cn,t)}function bi(t,e,n){var i=de(Ct++,2);if(i.t=t,!i.__c&&(i.__=[n?n(e):cn(void 0,e),function(a){var c=i.__N?i.__N[0]:i.__[0],u=i.t(c,a);c!==u&&(i.__N=[u,i.__[1]],i.__c.setState({}))}],i.__c=H,!H.__f)){var o=function(a,c,u){if(!i.__c.__H)return!0;var f=i.__c.__H.__.filter(function(d){return!!d.__c});if(f.every(function(d){return!d.__N}))return!r||r.call(this,a,c,u);var l=i.__c.props!==a;return f.forEach(function(d){if(d.__N){var p=d.__[0];d.__=d.__N,d.__N=void 0,p!==d.__[0]&&(l=!0)}}),r&&r.call(this,a,c,u)||l};H.__f=!0;var r=H.shouldComponentUpdate,s=H.componentWillUpdate;H.componentWillUpdate=function(a,c,u){if(this.__e){var f=r;r=void 0,o(a,c,u),r=f}s&&s.call(this,a,c,u)},H.shouldComponentUpdate=o}return i.__N||i.__}function M(t,e){var n=de(Ct++,3);!A.__s&&ln(n.__H,e)&&(n.__=t,n.u=e,H.__H.__h.push(n))}function O(t){return Mt=5,et(function(){return{current:t}},[])}function et(t,e){var n=de(Ct++,7);return ln(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function an(t,e){return Mt=8,et(function(){return t},e)}function xi(){for(var t;t=sn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach($t),t.__H.__h.forEach(ue),t.__H.__h=[]}catch(e){t.__H.__h=[],A.__e(e,t.__v)}}A.__b=function(t){H=null,Ze&&Ze(t)},A.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),rn&&rn(t,e)},A.__r=function(t){Qe&&Qe(t),Ct=0;var e=(H=t.__c).__H;e&&(ce===H?(e.__h=[],H.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach($t),e.__h.forEach(ue),e.__h=[],Ct=0)),ce=H},A.diffed=function(t){tn&&tn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(sn.push(e)!==1&&Je===A.requestAnimationFrame||((Je=A.requestAnimationFrame)||wi)(xi)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ce=H=null},A.__c=function(t,e){e.some(function(n){try{n.__h.forEach($t),n.__h=n.__h.filter(function(i){return!i.__||ue(i)})}catch(i){e.some(function(o){o.__h&&(o.__h=[])}),e=[],A.__e(i,n.__v)}}),en&&en(t,e)},A.unmount=function(t){nn&&nn(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{$t(i)}catch(o){e=o}}),n.__H=void 0,e&&A.__e(e,n.__v))};var on=typeof requestAnimationFrame=="function";function wi(t){var e,n=function(){clearTimeout(i),on&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);on&&(e=requestAnimationFrame(n))}function $t(t){var e=H,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),H=e}function ue(t){var e=H;t.__c=t.__(),H=e}function ln(t,e){return!t||t.length!==e.length||e.some(function(n,i){return n!==t[i]})}function cn(t,e){return typeof e=="function"?e(t):e}var Si=Symbol.for("preact-signals");function Ut(){if(nt>1)nt--;else{for(var t,e=!1;Rt!==void 0;){var n=Rt;for(Rt=void 0,fe++;n!==void 0;){var i=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&dn(n))try{n.c()}catch(o){e||(t=o,e=!0)}n=i}}if(fe=0,nt--,e)throw t}}function pe(t){if(nt>0)return t();nt++;try{return t()}finally{Ut()}}var L=void 0;var Rt=void 0,nt=0,fe=0,Ot=0;function un(t){if(L!==void 0){var e=t.n;if(e===void 0||e.t!==L)return e={i:0,S:t,p:L.s,n:void 0,t:L,e:void 0,x:void 0,r:e},L.s!==void 0&&(L.s.n=e),L.s=e,t.n=e,32&L.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=L.s,e.n=void 0,L.s.n=e,L.s=e),e}}function D(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}D.prototype.brand=Si;D.prototype.h=function(){return!0};D.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};D.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};D.prototype.subscribe=function(t){var e=this;return ot(function(){var n=e.value,i=L;L=void 0;try{t(n)}finally{L=i}})};D.prototype.valueOf=function(){return this.value};D.prototype.toString=function(){return this.value+""};D.prototype.toJSON=function(){return this.value};D.prototype.peek=function(){var t=L;L=void 0;try{return this.value}finally{L=t}};Object.defineProperty(D.prototype,"value",{get:function(){var t=un(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(fe>100)throw new Error("Cycle detected");this.v=t,this.i++,Ot++,nt++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{Ut()}}}});function T(t){return new D(t)}function dn(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function fn(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function pn(t){for(var e=t.s,n=void 0;e!==void 0;){var i=e.p;e.i===-1?(e.S.U(e),i!==void 0&&(i.n=e.n),e.n!==void 0&&(e.n.p=i)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=i}t.s=n}function pt(t){D.call(this,void 0),this.x=t,this.s=void 0,this.g=Ot-1,this.f=4}(pt.prototype=new D).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ot))return!0;if(this.g=Ot,this.f|=1,this.i>0&&!dn(this))return this.f&=-2,!0;var t=L;try{fn(this),L=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return L=t,pn(this),this.f&=-2,!0};pt.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}D.prototype.S.call(this,t)};pt.prototype.U=function(t){if(this.t!==void 0&&(D.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};pt.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(pt.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=un(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function rt(t){return new pt(t)}function hn(t){var e=t.u;if(t.u=void 0,typeof e=="function"){nt++;var n=L;L=void 0;try{e()}catch(i){throw t.f&=-2,t.f|=8,he(t),i}finally{L=n,Ut()}}}function he(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,hn(t)}function Ei(t){if(L!==this)throw new Error("Out-of-order effect");pn(this),L=t,this.f&=-2,8&this.f&&he(this),Ut()}function Tt(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}Tt.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};Tt.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,hn(this),fn(this),nt++;var t=L;return L=this,Ei.bind(this,t)};Tt.prototype.N=function(){2&this.f||(this.f|=2,this.o=Rt,Rt=this)};Tt.prototype.d=function(){this.f|=8,1&this.f||he(this)};function ot(t){var e=new Tt(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var mn,Vt,me;var gn=[];ot(function(){mn=this.N})();function ht(t,e){E[t]=e.bind(null,E[t]||function(){})}function Wt(t){me&&me(),me=t&&t.S()}function vn(t){var e=this,n=t.data,i=Y(n);i.value=n;var o=et(function(){for(var a=e,c=e.__v;c=c.__;)if(c.__c){c.__c.__$f|=4;break}var u=rt(function(){var p=i.value.value;return p===0?0:p===!0?"":p||""}),f=rt(function(){return!re(u.value)}),l=ot(function(){if(this.N=_n,f.value){var p=u.value;a.base&&a.base.nodeType===3&&(a.base.data=p)}}),d=e.__$u.d;return e.__$u.d=function(){l(),d.call(this)},[f,u]},[]),r=o[0],s=o[1];return r.value?s.peek():s.value}vn.displayName="_st";Object.defineProperties(D.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:vn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ht("__b",function(t,e){if(typeof e.type=="string"){var n,i=e.props;for(var o in i)if(o!=="children"){var r=i[o];r instanceof D&&(n||(e.__np=n={}),n[o]=r,i[o]=r.peek())}}t(e)});ht("__r",function(t,e){Wt();var n,i=e.__c;i&&(i.__$f&=-2,(n=i.__$u)===void 0&&(i.__$u=n=function(o){var r;return ot(function(){r=this}),r.c=function(){i.__$f|=1,i.setState({})},r}())),Vt=i,Wt(n),t(e)});ht("__e",function(t,e,n,i){Wt(),Vt=void 0,t(e,n,i)});ht("diffed",function(t,e){Wt(),Vt=void 0;var n;if(typeof e.type=="string"&&(n=e.__e)){var i=e.__np,o=e.props;if(i){var r=n.U;if(r)for(var s in r){var a=r[s];a!==void 0&&!(s in i)&&(a.d(),r[s]=void 0)}else r={},n.U=r;for(var c in i){var u=r[c],f=i[c];u===void 0?(u=Ci(n,c,f,o),r[c]=u):u.o(f,o)}}}t(e)});function Ci(t,e,n,i){var o=e in t&&t.ownerSVGElement===void 0,r=T(n);return{o:function(s,a){r.value=s,i=a},d:ot(function(){this.N=_n;var s=r.value.value;i[e]!==s&&(i[e]=s,o?t[e]=s:s?t.setAttribute(e,s):t.removeAttribute(e))})}}ht("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var i=n.U;if(i){n.U=void 0;for(var o in i){var r=i[o];r&&r.d()}}}}else{var s=e.__c;if(s){var a=s.__$u;a&&(s.__$u=void 0,a.d())}}t(e)});ht("__h",function(t,e,n,i){(i<3||i===9)&&(e.__$f|=2),t(e,n,i)});tt.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,i=n&&n.s!==void 0;for(var o in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var r=2&this.__$f;if(!(i||r||4&this.__$f)||1&this.__$f)return!0}else if(!(i||4&this.__$f)||3&this.__$f)return!0;for(var s in t)if(s!=="__source"&&t[s]!==this.props[s])return!0;for(var a in this.props)if(!(a in t))return!0;return!1};function Y(t){return et(function(){return T(t)},[])}function R(t){var e=O(t);return e.current=t,Vt.__$f|=4,et(function(){return rt(function(){return e.current()})},[])}var Mi=function(t){queueMicrotask(function(){queueMicrotask(t)})};function Ri(){pe(function(){for(var t;t=gn.shift();)mn.call(t)})}function _n(){gn.push(this)===1&&(E.requestAnimationFrame||Mi)(Ri)}var Ti={};function Lt(t,e){for(var n in e)t[n]=e[n];return t}function Li(t,e,n){var i,o=/(?:\?([^#]*))?(#.*)?$/,r=t.match(o),s={};if(r&&r[1])for(var a=r[1].split("&"),c=0;c<a.length;c++){var u=a[c].split("=");s[decodeURIComponent(u[0])]=decodeURIComponent(u.slice(1).join("="))}t=ge(t.replace(o,"")),e=ge(e||"");for(var f=Math.max(t.length,e.length),l=0;l<f;l++)if(e[l]&&e[l].charAt(0)===":"){var d=e[l].replace(/(^:|[+*?]+$)/g,""),p=(e[l].match(/[+*?]+$/)||Ti)[0]||"",m=~p.indexOf("+"),b=~p.indexOf("*"),v=t[l]||"";if(!v&&!b&&(p.indexOf("?")<0||m)){i=!1;break}if(s[d]=decodeURIComponent(v),m||b){s[d]=t.slice(l).map(decodeURIComponent).join("/");break}}else if(e[l]!==t[l]){i=!1;break}return(n.default===!0||i!==!1)&&s}function Hi(t,e){return t.rank<e.rank?1:t.rank>e.rank?-1:t.index-e.index}function Ai(t,e){return t.index=e,t.rank=function(n){return n.props.default?0:ge(n.props.path).map(Di).join("")}(t),t.props}function ge(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Di(t){return t.charAt(0)==":"?1+"*+?".indexOf(t.charAt(t.length-1))||4:5}var Pi={},st=[],yn=[],V=null,xn={url:ve()},Ni=Ke(xn);function ve(){var t;return""+((t=V&&V.location?V.location:V&&V.getCurrentLocation?V.getCurrentLocation():typeof location<"u"?location:Pi).pathname||"")+(t.search||"")}function ki(t,e){return e===void 0&&(e=!1),typeof t!="string"&&t.url&&(e=t.replace,t=t.url),function(n){for(var i=st.length;i--;)if(st[i].canRoute(n))return!0;return!1}(t)&&function(n,i){i===void 0&&(i="push"),V&&V[i]?V[i](n):typeof history<"u"&&history[i+"State"]&&history[i+"State"](null,null,n)}(t,e?"replace":"push"),wn(t)}function wn(t){for(var e=!1,n=0;n<st.length;n++)st[n].routeTo(t)&&(e=!0);return e}function Ii(t){if(t&&t.getAttribute){var e=t.getAttribute("href"),n=t.getAttribute("target");if(e&&e.match(/^\//g)&&(!n||n.match(/^_?self$/i)))return ki(e)}}function zi(t){return t.stopImmediatePropagation&&t.stopImmediatePropagation(),t.stopPropagation&&t.stopPropagation(),t.preventDefault(),!1}function Sn(t){if(!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)){var e=t.target;do if(e.localName==="a"&&e.getAttribute("href")){if(e.hasAttribute("data-native")||e.hasAttribute("native"))return;if(Ii(e))return zi(t)}while(e=e.parentNode)}}var bn=!1;function Fi(t){t.history&&(V=t.history),this.state={url:t.url||ve()}}Lt(Fi.prototype=new tt,{shouldComponentUpdate:function(t){return t.static!==!0||t.url!==this.props.url||t.onChange!==this.props.onChange},canRoute:function(t){var e=zt(this.props.children);return this.g(e,t)!==void 0},routeTo:function(t){this.setState({url:t});var e=this.canRoute(t);return this.p||this.forceUpdate(),e},componentWillMount:function(){this.p=!0},componentDidMount:function(){var t=this;bn||(bn=!0,V||addEventListener("popstate",function(){wn(ve())}),addEventListener("click",Sn)),st.push(this),V&&(this.u=V.listen(function(e){var n=e.location||e;t.routeTo(""+(n.pathname||"")+(n.search||""))})),this.p=!1},componentWillUnmount:function(){typeof this.u=="function"&&this.u(),st.splice(st.indexOf(this),1)},componentWillUpdate:function(){this.p=!0},componentDidUpdate:function(){this.p=!1},g:function(t,e){t=t.filter(Ai).sort(Hi);for(var n=0;n<t.length;n++){var i=t[n],o=Li(e,i.props.path,i.props);if(o)return[i,o]}},render:function(t,e){var n,i,o=t.onChange,r=e.url,s=this.c,a=this.g(zt(t.children),r);if(a&&(i=qe(a[0],Lt(Lt({url:r,matches:n=a[1]},n),{key:void 0,ref:void 0}))),r!==(s&&s.url)){Lt(xn,s=this.c={url:r,previous:s&&s.url,current:i,path:i?i.props.path:null,matches:n}),s.router=this,s.active=i?[i]:[];for(var c=yn.length;c--;)yn[c]({});typeof o=="function"&&o(s)}return $(Ni.Provider,{value:s},i)}});var En=function(t){return $("a",Lt({onClick:Sn},t))};var I=[];for(Bt=0;Bt<256;++Bt)I.push((Bt+256).toString(16).slice(1));var Bt;function Cn(t,e=0){return(I[t[e+0]]+I[t[e+1]]+I[t[e+2]]+I[t[e+3]]+"-"+I[t[e+4]]+I[t[e+5]]+"-"+I[t[e+6]]+I[t[e+7]]+"-"+I[t[e+8]]+I[t[e+9]]+"-"+I[t[e+10]]+I[t[e+11]]+I[t[e+12]]+I[t[e+13]]+I[t[e+14]]+I[t[e+15]]).toLowerCase()}var Gt,$i=new Uint8Array(16);function _e(){if(!Gt&&(Gt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Gt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Gt($i)}var Oi=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ye={randomUUID:Oi};function Ui(t,e,n){if(ye.randomUUID&&!e&&!t)return ye.randomUUID();t=t||{};var i=t.random||(t.rng||_e)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return Cn(i)}var be=Ui;var N=(()=>{let t=new Map,e=new ResizeObserver(o=>{o.forEach(r=>{let s=r.target;t.has(s)&&t.get(s)?.forEach(a=>a())})});new MutationObserver(()=>{t.forEach(o=>{o.forEach(r=>r())})}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["style","class"]});let i=new Set;return window.addEventListener("scroll",()=>{i.forEach(o=>o())},!0),{observe:(o,r)=>{o&&(t.has(o)||(t.set(o,new Set),e.observe(o)),t.get(o)?.add(r),i.add(r))},unobserve:(o,r)=>{if(o){if(t.has(o)){let s=t.get(o);s?.delete(r),s?.size===0&&(e.unobserve(o),t.delete(o))}i.delete(r)}}}})();var co=Object.freeze({margin:"0px 0px 0px 0px"}),uo=Object.freeze({"ctrl-c":"#00000000","ctrl-g":"[]","ctrl-g-type":"linear","ctrl-g-a":"0","ctrl-i":"","ctrl-mode":"base",background:"#00000000"});var fo=Object.freeze({"backdrop-filter":"none",filter:"none"});var po=Object.freeze({overflow:"initial"});var ho=Object.freeze({"grid-column":"span 1","grid-row":"span 1"}),mo=Object.freeze({display:"flex","flex-direction":"","align-items":"flex-start","justify-content":"flex-start",gap:"","grid-template-columns":"","ctrl-mode":"row","ctrl-gc":"3","ctrl-gmcw":"100px"});var go=Object.freeze({top:"",right:"",bottom:"",left:"",transform:"initial",position:"relative","ctrl-mh":"","ctrl-mv":""}),Mn=Object.freeze({width:"auto",height:"auto","min-width":"initial","max-width":"initial","min-height":"initial","max-height":"initial"}),vo=Object.freeze({"ctrl-h":"0px","ctrl-v":"0px","ctrl-b":"0px","ctrl-s":"0px","ctrl-c":"#000000"});var xe=["desktop","tablet","mobile"],we=new Set(xe),bo=Object.fromEntries([...we].map(t=>[t,null])),xo=Object.fromEntries([...we].map(t=>[t,!1])),Se=[{action:"tf-h1",icon:"bi-type-h1",text:"28 pixeles",size:"28px"},{action:"tf-h2",icon:"bi-type-h2",text:"25 pixeles",size:"25px"},{action:"tf-h3",icon:"bi-type-h3",text:"22 pixeles",size:"22px"},{action:"tf-h4",icon:"bi-type-h4",text:"19 pixeles",size:"19px"},{action:"tf-h5",icon:"bi-type-h5",text:"16 pixeles",size:"16px"},{action:"tf-h6",icon:"bi-type-h6",text:"14 pixeles",size:"14px"},{action:"tf-p",icon:"bi-paragraph",text:"16 pixeles",size:"16px"}],wo=Se.reduce((t,e)=>(t[e.action]=e.size,t),{});function Wi(t){return!isNaN(parseFloat(t||""))}function Rn(t,e=""){let n=new Set(["px","%","vh","vw","auto","unset",""]),i=t?.trim()||e,o=parseFloat(i),r=i.replace(o.toString(),"")||"";return n.has(r)?{num:o,unit:r,isFixedUnit:Wi(i)}:{num:o,unit:"",isFixedUnit:!1}}var Ln=800;function Ee(t,e=window){let n=a=>a?{html:a,top:a.offsetTop,right:a.offsetWidth-a.offsetLeft,bottom:a.offsetHeight-a.offsetTop,left:a.offsetLeft,width:a.offsetWidth,height:a.offsetHeight}:{html:null,top:0,left:0,right:e.document.documentElement.clientWidth,width:e.document.documentElement.clientWidth,height:e.innerHeight},o=e.getComputedStyle(t).position==="fixed",r=null;if(!o)r=n(t.parentElement);else{let a=t.parentElement;for(;a;){let c=e.getComputedStyle(a);if(c.transform!=="none"||c.perspective!=="none"||c.filter!=="none"){r=n(a);break}a=a.parentElement}r||(r=n(null))}let s=null;if(o)s=r;else{let a=t.parentElement;for(;a;){let c=e.getComputedStyle(a);if(c.transform!=="none"||c.perspective!=="none"||c.filter!=="none"){s=n(a);break}a=a.parentElement}s||(s=n(null))}return{...r,frTop:s.top,frLeft:s.left,frWidth:s.width,frHeight:s.height}}function Tn(t){if(t==="auto")return 1;let e=t.match(/^span\s+(\d+)$/);return e?parseInt(e[1]):1}var Hn=(t,e=window)=>{let n=e.getComputedStyle(t),i=Ee(t),o=i.html,r=t.offsetWidth,s=t.offsetHeight,a=i.width,c=i.height;if(o){let u=e.getComputedStyle(o),f=u.display==="grid",l=!["relative","sticky"].includes(n.position),d=i.width,p=i.height,m=Tn(n.gridColumn),b=Tn(n.gridRow),v=l?0:parseFloat(u.paddingLeft)+parseFloat(u.paddingRight),g=l?0:parseInt(u.paddingTop)+parseInt(u.paddingBottom),y=l?1:u.gridTemplateColumns.split(" ").length,x=parseInt(u.columnGap)||0,w=parseInt(u.rowGap)||0,S=!f||l?0:(y-1)*x;a=(d-v-S)/y*m+x*(m-1);let C=l?1:u.gridTemplateRows.split(" ").length,k=!f||l?0:(C-1)*w;c=(p-g-k)/C*b+w*(b-1)}return{width:+r.toFixed(2),height:+s.toFixed(2),percentWidth:+(r/a*100).toFixed(1),percentHeight:+(s/c*100).toFixed(1),parenteRect:i}};function Vi(t,e,n={}){if(!t||!we.has(e))return null;let i=xe.indexOf(e);for(let o=i;o>=0;o--){let r=t[xe[o]];if(r)return{...r}}return n}var Xt=class{constructor(e,n){this.node=e;this.device=n;this.typeComponent="";this.getGroupStyle=(e,n)=>!this.node.currentCss||!this.node.currentCss[e]?{...n}:Vi(this.node.currentCss[e],this.device,{...n});this.getSize=()=>this.getGroupStyle("size",{...Mn});this.getSizeUnit=()=>{let e=this.getSize();return{w:Rn(e.width),h:Rn(e.height)}};this.typeComponent=this.node.type}};var Bi=0,Co=Array.isArray;function h(t,e,n,i,o,r){e||(e={});var s,a,c=e;if("ref"in c)for(a in c={},e)a=="ref"?s=e[a]:c[a]=e[a];var u={type:t,props:c,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Bi,__i:-1,__u:0,__source:o,__self:r};if(typeof t=="function"&&(s=t.defaultProps))for(a in s)c[a]===void 0&&(c[a]=s[a]);return E.vnode&&E.vnode(u),u}var q=T(null),mt=T("main"),Ht=T(new Map),Gi=()=>q.value!=null&&h("div",{class:"overlay-back",style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",backgroundColor:"rgba(0, 0, 0, 0.5)"}}),An=()=>{let t=R(()=>modeview!=="designer"?{}:q.value?.type=="overlay"?{width:"100%",height:"100%",transform:"translate(0, 0)"}:q.value?.type=="dialog"?{width:"100%",height:Ln+"px",transform:"translate(0, 0)",outline:"1px solid #5c7aff"}:{}),e=R(()=>q.value==null||modeview!=="designer"?{}:{width:"100%",height:"100%",transform:"translate(0, 0)",display:"flex",flexDirection:"column"});return h("div",{id:"overlay-manager",class:mt.value,style:e.value,children:[h("div",{class:"overlay-wrapp",style:t.value,children:[h(Gi,{}),Array.from(Ht.value.values()).flatMap(n=>n)]}),h("div",{className:"gap",style:{flex:"1",width:"100%",background:"#0000000f",backdropFilter:"grayscale(1)"}})]})};function Dn(t,e){let n=Ht.value;n.has(e)||(n.set(e,t),Ht.value=new Map(n))}function Pn(t){let e=Ht.value;e.has(t)&&(e.delete(t),Ht.value=new Map(e))}var gt=class t{constructor(){this.addAppVariant=(e,n)=>{let i=t.variants.value;i.has(e)||(i.set(e,n),t.variants.value=new Map(i))};this.removeAppVariant=e=>{let n=t.variants.value;n.has(e)&&(n.delete(e),t.variants.value=new Map(n))}}static{this.variants=T(new Map)}static{this.instance=null}static{this.getInstance=()=>(t.instance==null&&(t.instance=new t),t.instance)}static{this.Node=e=>{let[n,i]=z({x:0,y:0,width:0}),o=()=>{let r=e.html.getBoundingClientRect(),s=r.top,a=r.left,c=r.width;i({x:a,y:s,width:c})};return M(()=>(o(),N.observe(e.html,o),()=>N.unobserve(e.html,o)),[]),h("div",{style:{left:n.x+"px",top:n.y+"px",width:n.width+"px"},class:"app-identifier",children:[h("span",{children:e.name}),mt.value==e.name&&h("div",{children:" Activo "})]})}}static{this.Component=()=>R(()=>Array.from(t.variants.value).map(([n,i])=>({name:n,html:i}))).value.map(n=>h(t.Node,{name:n.name,html:n.html}))}};var jt=".wmw",Nn="enable-adders",Yt="wmid";var U=class t{static getElementProps(e){let n=window.getComputedStyle(e),i=parseFloat(n.paddingTop),o=parseFloat(n.paddingRight),r=parseFloat(n.paddingBottom),s=parseFloat(n.paddingLeft),a=parseFloat(n.marginTop),c=parseFloat(n.marginRight),u=parseFloat(n.marginBottom),f=parseFloat(n.marginLeft),l=n.display==="grid"||n.display==="flex",d=l?parseFloat(n.rowGap):0,p=l?parseFloat(n.columnGap):0;return{top:i,right:o,bottom:r,left:s,marginTop:a,marginRight:c,marginBottom:u,marginLeft:f,display:n.display,rowGap:d,columnGap:p}}static calculateRadiusHandlerPosition(e,n,i){let r=Math.min(n,i)/2,s=Math.max(e,10),a=Math.max(e,10);return e<=10&&(s=10,a=10),e>=r&&(s=r,a=r),{left:`${s}px`,top:`${a}px`}}static minRadiusValue(e){let n=e.split(" ").map(i=>parseFloat(i)||0);return Math.min(...n)}static maxRadiusValueApply(e,n){return Math.min(e,n)/2}static{this.getScale=e=>{if(e&&e!=="none"){let n=e.match(/scale\(([^)]+)\)/);if(n)return Math.abs(+n[1]);if(n=e.match(/matrix(?:3d)?\(([^)]+)\)/),n)return Math.abs(+n[1].split(",")[0])}return 1}}static calculeInit(e){let n=getComputedStyle(e),i=e.getAttribute("wt"),o=n.position,r=Ee(e),s=e.getBoundingClientRect(),a=s.width,c=s.height,u=Math.round(t.maxRadiusValueApply(c,a)),f=t.getScale(n.transform),l=t.minRadiusValue(n.borderRadius),d=e.parentElement,m=d.getBoundingClientRect().width/d.offsetWidth||1;return{width:e.offsetWidth,height:e.offsetHeight,clientWidth:s.width,clientHeight:s.height,target:e,left:e.offsetLeft,top:e.offsetTop,position:o,parentReferece:r,type:i,parent:e.parentElement,fontSize:parseInt(n.fontSize,10),clientTop:s.top,clientLeft:s.left,realRadius:u<l?u:l,parentNode:e.parentElement?.closest(".wmw")||null,contextScale:m,selfScale:f}}};var J=class{static{this.updateScripts=(e,n)=>{let i=document.getElementById(e);if(!i)return;let o=document.createElement("script");i.getAttributeNames().forEach(r=>{let s=i.getAttribute(r);s!==null&&o.setAttribute(r,s)}),o.textContent=n,i.parentNode?.replaceChild(o,i)}}static appendScript(e){let n=document.createElement("script");n.textContent=e,document.body.appendChild(n)}static updatePosition(e,n){let i=document.body.getBoundingClientRect(),o=e.getBoundingClientRect(),r=n.pageX-10,s=n.pageY-10;r+o.width>i.width&&(r=i.width-o.width),s+o.height>i.height&&(s=i.height-o.height),r=Math.max(0,r),s=Math.max(0,s),e.style.setProperty("left",`${r}px`),e.style.setProperty("top",`${s}px`)}static addElement(e,n){let i=document.createElement("div");for(i.innerHTML=e;i.firstChild;)n.appendChild(i.firstChild)}static catchNode(e){let n=e.target.closest(jt),i=n?.getAttribute("wt"),o=n?.getAttribute(Yt);return n==null||i==null||o==null?null:{html:n,type:i,id:o}}};function kn(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;let n=document.implementation.createHTMLDocument(),i=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(o),e&&(i.href=e),o.href=t,o.href}var In=(()=>{let t=0,e=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(t+=1,`u${e()}${t}`)})();function G(t){let e=[];for(let n=0,i=t.length;n<i;n++)e.push(t[n]);return e}function qt(t,e){let i=(t.ownerDocument.defaultView||window).getComputedStyle(t).getPropertyValue(e);return i?parseFloat(i.replace("px","")):0}function Xi(t){let e=qt(t,"border-left-width"),n=qt(t,"border-right-width");return t.clientWidth+e+n}function ji(t){let e=qt(t,"border-top-width"),n=qt(t,"border-bottom-width");return t.clientHeight+e+n}function Ce(t,e={}){let n=e.width||Xi(t),i=e.height||ji(t);return{width:n,height:i}}function zn(){let t,e;try{e=process}catch{}let n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}var B=16384;function Fn(t){(t.width>B||t.height>B)&&(t.width>B&&t.height>B?t.width>t.height?(t.height*=B/t.width,t.width=B):(t.width*=B/t.height,t.height=B):t.width>B?(t.height*=B/t.width,t.width=B):(t.width*=B/t.height,t.height=B))}function vt(t){return new Promise((e,n)=>{let i=new Image;i.decode=()=>e(i),i.onload=()=>e(i),i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=t})}async function Yi(t){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(t)).then(encodeURIComponent).then(e=>`data:image/svg+xml;charset=utf-8,${e}`)}async function $n(t,e,n){let i="http://www.w3.org/2000/svg",o=document.createElementNS(i,"svg"),r=document.createElementNS(i,"foreignObject");return o.setAttribute("width",`${e}`),o.setAttribute("height",`${n}`),o.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),o.appendChild(r),r.appendChild(t),Yi(o)}var F=(t,e)=>{if(t instanceof e)return!0;let n=Object.getPrototypeOf(t);return n===null?!1:n.constructor.name===e.name||F(n,e)};function qi(t){let e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function Ki(t){return G(t).map(e=>{let n=t.getPropertyValue(e),i=t.getPropertyPriority(e);return`${e}: ${n}${i?" !important":""};`}).join(" ")}function Ji(t,e,n){let i=`.${t}:${e}`,o=n.cssText?qi(n):Ki(n);return document.createTextNode(`${i}{${o}}`)}function On(t,e,n){let i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(o===""||o==="none")return;let r=In();try{e.className=`${e.className} ${r}`}catch{return}let s=document.createElement("style");s.appendChild(Ji(r,n,i)),e.appendChild(s)}function Un(t,e){On(t,e,":before"),On(t,e,":after")}var Wn="application/font-woff",Vn="image/jpeg",Zi={woff:Wn,woff2:Wn,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Vn,jpeg:Vn,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function Qi(t){let e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function _t(t){let e=Qi(t).toLowerCase();return Zi[e]||""}function tr(t){return t.split(/,/)[1]}function At(t){return t.search(/^(data:)/)!==-1}function Re(t,e){return`data:${e};base64,${t}`}async function Te(t,e,n){let i=await fetch(t,e);if(i.status===404)throw new Error(`Resource "${i.url}" not found`);let o=await i.blob();return new Promise((r,s)=>{let a=new FileReader;a.onerror=s,a.onloadend=()=>{try{r(n({res:i,result:a.result}))}catch(c){s(c)}},a.readAsDataURL(o)})}var Me={};function er(t,e,n){let i=t.replace(/\?.*/,"");return n&&(i=t),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),e?`[${e}]${i}`:i}async function yt(t,e,n){let i=er(t,e,n.includeQueryParams);if(Me[i]!=null)return Me[i];n.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+new Date().getTime());let o;try{let r=await Te(t,n.fetchRequestInit,({res:s,result:a})=>(e||(e=s.headers.get("Content-Type")||""),tr(a)));o=Re(r,e)}catch(r){o=n.imagePlaceholder||"";let s=`Failed to fetch resource: ${t}`;r&&(s=typeof r=="string"?r:r.message),s&&console.warn(s)}return Me[i]=o,o}async function nr(t){let e=t.toDataURL();return e==="data:,"?t.cloneNode(!1):vt(e)}async function ir(t,e){if(t.currentSrc){let r=document.createElement("canvas"),s=r.getContext("2d");r.width=t.clientWidth,r.height=t.clientHeight,s?.drawImage(t,0,0,r.width,r.height);let a=r.toDataURL();return vt(a)}let n=t.poster,i=_t(n),o=await yt(n,i,e);return vt(o)}async function rr(t){var e;try{if(!((e=t?.contentDocument)===null||e===void 0)&&e.body)return await Dt(t.contentDocument.body,{},!0)}catch{}return t.cloneNode(!1)}async function or(t,e){return F(t,HTMLCanvasElement)?nr(t):F(t,HTMLVideoElement)?ir(t,e):F(t,HTMLIFrameElement)?rr(t):t.cloneNode(!1)}var sr=t=>t.tagName!=null&&t.tagName.toUpperCase()==="SLOT";async function ar(t,e,n){var i,o;let r=[];return sr(t)&&t.assignedNodes?r=G(t.assignedNodes()):F(t,HTMLIFrameElement)&&(!((i=t.contentDocument)===null||i===void 0)&&i.body)?r=G(t.contentDocument.body.childNodes):r=G(((o=t.shadowRoot)!==null&&o!==void 0?o:t).childNodes),r.length===0||F(t,HTMLVideoElement)||await r.reduce((s,a)=>s.then(()=>Dt(a,n)).then(c=>{c&&e.appendChild(c)}),Promise.resolve()),e}function lr(t,e){let n=e.style;if(!n)return;let i=window.getComputedStyle(t);i.cssText?(n.cssText=i.cssText,n.transformOrigin=i.transformOrigin):G(i).forEach(o=>{let r=i.getPropertyValue(o);o==="font-size"&&r.endsWith("px")&&(r=`${Math.floor(parseFloat(r.substring(0,r.length-2)))-.1}px`),F(t,HTMLIFrameElement)&&o==="display"&&r==="inline"&&(r="block"),o==="d"&&e.getAttribute("d")&&(r=`path(${e.getAttribute("d")})`),n.setProperty(o,r,i.getPropertyPriority(o))})}function cr(t,e){F(t,HTMLTextAreaElement)&&(e.innerHTML=t.value),F(t,HTMLInputElement)&&e.setAttribute("value",t.value)}function ur(t,e){if(F(t,HTMLSelectElement)){let n=e,i=Array.from(n.children).find(o=>t.value===o.getAttribute("value"));i&&i.setAttribute("selected","")}}function dr(t,e){return F(e,Element)&&(lr(t,e),Un(t,e),cr(t,e),ur(t,e)),e}async function fr(t,e){let n=t.querySelectorAll?t.querySelectorAll("use"):[];if(n.length===0)return t;let i={};for(let r=0;r<n.length;r++){let a=n[r].getAttribute("xlink:href");if(a){let c=t.querySelector(a),u=document.querySelector(a);!c&&u&&!i[a]&&(i[a]=await Dt(u,e,!0))}}let o=Object.values(i);if(o.length){let r="http://www.w3.org/1999/xhtml",s=document.createElementNS(r,"svg");s.setAttribute("xmlns",r),s.style.position="absolute",s.style.width="0",s.style.height="0",s.style.overflow="hidden",s.style.display="none";let a=document.createElementNS(r,"defs");s.appendChild(a);for(let c=0;c<o.length;c++)a.appendChild(o[c]);t.appendChild(s)}return t}async function Dt(t,e,n){return!n&&e.filter&&!e.filter(t)?null:Promise.resolve(t).then(i=>or(i,e)).then(i=>ar(t,i,e)).then(i=>dr(t,i)).then(i=>fr(i,e))}var Bn=/url\((['"]?)([^'"]+?)\1\)/g,pr=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,hr=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function mr(t){let e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function gr(t){let e=[];return t.replace(Bn,(n,i,o)=>(e.push(o),n)),e.filter(n=>!At(n))}async function vr(t,e,n,i,o){try{let r=n?kn(e,n):e,s=_t(e),a;if(o){let c=await o(r);a=Re(c,s)}else a=await yt(r,s,i);return t.replace(mr(e),`$1${a}$3`)}catch{}return t}function _r(t,{preferredFontFormat:e}){return e?t.replace(hr,n=>{for(;;){let[i,,o]=pr.exec(n)||[];if(!o)return"";if(o===e)return`src: ${i};`}}):t}function Le(t){return t.search(Bn)!==-1}async function Kt(t,e,n){if(!Le(t))return t;let i=_r(t,n);return gr(i).reduce((r,s)=>r.then(a=>vr(a,s,e,n)),Promise.resolve(i))}async function Jt(t,e,n){var i;let o=(i=e.style)===null||i===void 0?void 0:i.getPropertyValue(t);if(o){let r=await Kt(o,null,n);return e.style.setProperty(t,r,e.style.getPropertyPriority(t)),!0}return!1}async function yr(t,e){await Jt("background",t,e)||await Jt("background-image",t,e),await Jt("mask",t,e)||await Jt("mask-image",t,e)}async function br(t,e){let n=F(t,HTMLImageElement);if(!(n&&!At(t.src))&&!(F(t,SVGImageElement)&&!At(t.href.baseVal)))return;let i=n?t.src:t.href.baseVal,o=await yt(i,_t(i),e);await new Promise((r,s)=>{t.onload=r,t.onerror=s;let a=t;a.decode&&(a.decode=r),a.loading==="lazy"&&(a.loading="eager"),n?(t.srcset="",t.src=o):t.href.baseVal=o})}async function xr(t,e){let i=G(t.childNodes).map(o=>He(o,e));await Promise.all(i).then(()=>t)}async function He(t,e){F(t,Element)&&(await yr(t,e),await br(t,e),await xr(t,e))}function Gn(t,e){let{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=`${e.width}px`),e.height&&(n.height=`${e.height}px`);let i=e.style;return i!=null&&Object.keys(i).forEach(o=>{n[o]=i[o]}),t}var Xn={};async function jn(t){let e=Xn[t];if(e!=null)return e;let i=await(await fetch(t)).text();return e={url:t,cssText:i},Xn[t]=e,e}async function Yn(t,e){let n=t.cssText,i=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async s=>{let a=s.replace(i,"$1");return a.startsWith("https://")||(a=new URL(a,t.url).href),Te(a,e.fetchRequestInit,({result:c})=>(n=n.replace(s,`url(${c})`),[s,c]))});return Promise.all(r).then(()=>n)}function qn(t){if(t==null)return[];let e=[],n=/(\/\*[\s\S]*?\*\/)/gi,i=t.replace(n,""),o=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){let c=o.exec(i);if(c===null)break;e.push(c[0])}i=i.replace(o,"");let r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",a=new RegExp(s,"gi");for(;;){let c=r.exec(i);if(c===null){if(c=a.exec(i),c===null)break;r.lastIndex=a.lastIndex}else a.lastIndex=r.lastIndex;e.push(c[0])}return e}async function wr(t,e){let n=[],i=[];return t.forEach(o=>{if("cssRules"in o)try{G(o.cssRules||[]).forEach((r,s)=>{if(r.type===CSSRule.IMPORT_RULE){let a=s+1,c=r.href,u=jn(c).then(f=>Yn(f,e)).then(f=>qn(f).forEach(l=>{try{o.insertRule(l,l.startsWith("@import")?a+=1:o.cssRules.length)}catch(d){console.error("Error inserting rule from remote css",{rule:l,error:d})}})).catch(f=>{console.error("Error loading remote css",f.toString())});i.push(u)}})}catch(r){let s=t.find(a=>a.href==null)||document.styleSheets[0];o.href!=null&&i.push(jn(o.href).then(a=>Yn(a,e)).then(a=>qn(a).forEach(c=>{s.insertRule(c,o.cssRules.length)})).catch(a=>{console.error("Error loading remote stylesheet",a)})),console.error("Error inlining remote css file",r)}}),Promise.all(i).then(()=>(t.forEach(o=>{if("cssRules"in o)try{G(o.cssRules||[]).forEach(r=>{n.push(r)})}catch(r){console.error(`Error while reading CSS rules from ${o.href}`,r)}}),n))}function Sr(t){return t.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>Le(e.style.getPropertyValue("src")))}async function Er(t,e){if(t.ownerDocument==null)throw new Error("Provided element is not within a Document");let n=G(t.ownerDocument.styleSheets),i=await wr(n,e);return Sr(i)}async function Kn(t,e){let n=await Er(t,e);return(await Promise.all(n.map(o=>{let r=o.parentStyleSheet?o.parentStyleSheet.href:null;return Kt(o.cssText,r,e)}))).join(`
`)}async function Jn(t,e){let n=e.fontEmbedCSS!=null?e.fontEmbedCSS:e.skipFonts?null:await Kn(t,e);if(n){let i=document.createElement("style"),o=document.createTextNode(n);i.appendChild(o),t.firstChild?t.insertBefore(i,t.firstChild):t.appendChild(i)}}async function Cr(t,e={}){let{width:n,height:i}=Ce(t,e),o=await Dt(t,e,!0);return await Jn(o,e),await He(o,e),Gn(o,e),await $n(o,n,i)}async function Mr(t,e={}){let{width:n,height:i}=Ce(t,e),o=await Cr(t,e),r=await vt(o),s=document.createElement("canvas"),a=s.getContext("2d"),c=e.pixelRatio||zn(),u=e.canvasWidth||n,f=e.canvasHeight||i;return s.width=u*c,s.height=f*c,e.skipAutoScale||Fn(s),s.style.width=`${u}`,s.style.height=`${f}`,e.backgroundColor&&(a.fillStyle=e.backgroundColor,a.fillRect(0,0,s.width,s.height)),a.drawImage(r,0,0,s.width,s.height),s}async function Zt(t,e={}){return(await Mr(t,e)).toDataURL()}var Zn=()=>h("div",{style:{padding:"1rem",width:"100%",background:"#F44336",color:"white",userSelect:"none"},children:[h("h4",{children:"Error al cargar la aplicaci\xF3n"}),h("p",{children:"Por favor, recargue la p\xE1gina o intente m\xE1s tarde."})]});var Nt={DISABLE_HANDLER_AFTER_TRIGGERS_EVENTS:!1},at=class t{constructor(){this.onNodeMouseUp=null;this.onNodeMouseDown=null;this.registerEmitMessage=null}static{this._instance=null}static{this.instance=()=>(t._instance==null&&(t._instance=new t),t._instance)}},_=class t{constructor(){this.events=at.instance();this.selectNodes=e=>{t.baseSelectedNodes.value=e,t.updateSelectedNodes()};this.setDevice=(e,n)=>{if(n.length===0)return;let i=n.findIndex(s=>s.device===e);t.device=e;let o=n[i].width,r=document.querySelector("#app-wrapper");r&&(r.style.width=`${o}px`,r.style.maxWidth=`${o}px`,r.style.minWidth=`${o}px`),n.forEach((s,a)=>{document.body.classList.toggle(`d-${s.width}`,a<=i)})};this.setVariablesPage=e=>t.pages=e;this.setCssContext=e=>{mt.value=e,t.updateSelectedNodes()};this.setVariables=e=>{t.vars.value=e,Object.assign(window,{dataset:e})};this.setAddersState=e=>{document.body.classList.toggle(Nn,e),t.adderMode.value=e};this.setCurrentOverlayIdOpen=e=>q.value=e;this.recreateElement=e=>{try{let{fields:n,styleSheet:i,id:o}=e,r=document.getElementById(o);if(r)r.innerHTML=i;else{let a=document.createElement("style");a.id=o,a.innerHTML=i;let c=document.querySelector("style-components");c&&c.appendChild(a)}t.fieldChange.value={id:o,fields:n};let s=document.querySelector(`.${o}`);s&&(s.style.cssText="")}catch(n){console.error("Error recreando el elemento",n)}}}static{this.triggerAction=T(null)}static{this.vars=T({})}static{this.showMenu=T(!1)}static{this.isCustomComponent=T(!1)}static{this.infoBox=T({x:0,y:0,text:""})}static{this.baseSelectedNodes=T([])}static{this.selectedNodes=T([])}static{this.mapSelectedNodes=rt(()=>t.selectedNodes.value.reduce((e,{id:n,html:i,data:o})=>(e[n]={html:i,data:o},e),{}))}static{this.hoveredNodes=T({})}static{this.contextMode=T("main-editor")}static{this.fieldChange=T(null)}static{this.adderMode=T(!1)}static{this.idHoverSelector={node:null}}static{this.device=null}static{this.pages=[]}static{this._instance=null}static{this.instance=()=>(t._instance==null&&(t._instance=new t),t._instance)}static{this.isEnableAdders=()=>t.adderMode.value}static{this.sandboxCreated=()=>window.parent.postMessage("sandbox-ready","*")}static{this.emitMessage=(e,n)=>at.instance().registerEmitMessage?.({type:e,...n})}static{this.emitStylesChange=e=>t.emitMessage("style-change",{data:e})}static{this.emitTextFormat=e=>t.emitMessage("text-format",{action:e})}static removeHoveredNode(e){let n=t.hoveredNodes.value;delete n[e],t.hoveredNodes.value={...n}}static{this.addHoveredNode=(e,n)=>t.hoveredNodes.value={...t.hoveredNodes.value,[e]:n}}static{this.clearHoveredNodes=()=>t.hoveredNodes.value={}}static{this.getNodeById=(e,n=mt.value)=>document.querySelector(`.${n.replace(":","\\:")} [wmid="${e}"]`)}static{this.updateSelectedNodes=()=>{setTimeout(()=>{let e=t.baseSelectedNodes.value.map(n=>({id:n.id,html:t.getNodeById(n.id),data:n})).filter(n=>n.html!==null);t.selectedNodes.value=e,t.isCustomComponent.value=e.length===1&&e[0].data.isCustomComponent},0)}}setFontFamily(e){e.trim()&&(document.body.style.fontFamily=e)}insertResources({styles:e,classScript:n,scripts:i,styleSheet:o,selectedNodes:r,mode:s}){try{t.contextMode.value=s,document.body.setAttribute("mode",s),t.showMenu.value=!1;let a=document.getElementById("style-resources");a&&(a.textContent=e);let c=document.querySelector("style-components");if(c&&(c.innerHTML=o),n&&J.updateScripts("classes-resources",n),t.contextMode.value==="component-editor"){let u=["main","main:h"];Pt.value=u.map(f=>({nodes:(0,eval)(i),variant:f}))}else Pt.value=[{nodes:(0,eval)(i),variant:"main"}];t.clearHoveredNodes(),t.instance().selectNodes(r),console.log("\u2705 Todos los elementos han sido cargados")}catch(a){console.log("Error al cargar los recursos",a),Pt.value=[{nodes:[$(Zn,null)],variant:"main"}]}}setActiveHover(e){if(t.idHoverSelector.node?.classList.remove("hover"),t.idHoverSelector.node=null,e){let n=t.getNodeById(e);n&&(t.idHoverSelector.node=n,n.classList.add("hover"))}}async takeScreenShot(e){let n=t.getNodeById(e);if(!n){console.error("No se encontr\xF3 el elemento con ID:",e);return}let i=n.getElementsByTagName("img");return await Promise.all(Array.from(i).map(r=>r.complete?Promise.resolve():new Promise((s,a)=>{r.onload=()=>s(),r.onerror=a}))),await document.fonts.ready,await Zt(n,{filter:r=>!["helper","overlay","resizer","adder"].includes(r.tagName?.toLowerCase()),skipFonts:!1})}};var Qn=()=>{let[t,e]=z({x:0,y:0}),n=R(()=>_.contextMode.value==="document"&&_.adderMode.value);return M(()=>{let i=o=>{e({x:o.clientX,y:o.clientY})};return document.addEventListener("mousemove",i),()=>{document.removeEventListener("mousemove",i)}},[]),n.value?h("div",{id:"cursor-editor",style:{left:`${t.x+2}px`,top:`${t.y+2}px`,position:"fixed",height:"40px",width:"40px",backgroundColor:"red",pointerEvents:"none"},children:"Hi"}):null};var Qt=class t{constructor(){this.notify=e=>this.subscribers.forEach(n=>n(e));this.subscribers=[]}static{this.instance=null}subscribe(e){return this.subscribers.push(e),()=>this.unsubscribe(e)}unsubscribe(e){this.subscribers=this.subscribers.filter(n=>n!==e)}static getInstance(){return this.instance==null&&(this.instance=new t),this.instance}},bt=t=>{M(()=>{let e=Qt.getInstance().subscribe(n=>{t(n)});return()=>e()},[])},ti=(t,e)=>{Qt.getInstance().notify({channel:t,action:e.action,value:e.value})};var ei=({children:t,side:e="center",parent:n})=>{let i=O(null),[o,r]=z(!1),s=R(()=>typeof q<"u"&&q.value?.id===t.props?.wmid),a=e==="left"?"flex-start":e==="right"?"flex-end":"center",c=e==="top"?"flex-start":e==="bottom"?"flex-end":"center";bt(({channel:l,action:d})=>{l==="overlay"&&d==="close"&&r(!1)});let u=l=>{modeview!=="designer"&&(i.current?.contains(l.target)||r(n?.current?.contains(l.target)??!1))},f=l=>{modeview!=="designer"&&l.key==="Escape"&&r(!1)};return M(()=>(window.addEventListener("click",u),window.addEventListener("keydown",f),()=>{window.removeEventListener("click",u),window.removeEventListener("keydown",f)}),[]),modeview!=="designer"&&!o?null:h(P,{children:[h("div",{style:{position:"fixed",inset:"0",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:-1,display:modeview!=="designer"?"block":"none"}}),h("div",{className:"overlay-container dialog-container",ref:i,onClick:l=>{modeview!=="designer"&&l.target===i.current&&r(!1)},style:{position:"fixed",inset:"0",display:s.value||modeview!=="designer"||o?"flex":"none",justifyContent:a,alignItems:c},children:t})]})};var ni=({children:t,parent:e,side:n="bottom",align:i="center"})=>{let[o,r]=z({top:"-9999px",left:"-9999px",transform:"translate(-50%, 0)",padding:"0px"}),s=R(()=>q.value?.id===t?.props?.wmid),a=O(null),[c,u]=z(!1);bt(({channel:l,action:d})=>{l==="overlay"&&d==="close"&&c&&u(!1)}),M(()=>{let l=()=>{if(!e?.current||!a.current)return;let d=e.current.getBoundingClientRect(),p=a.current.getBoundingClientRect(),m="",b="",v="",g="0px";switch(n){case"bottom":g="5px 0 0 0";break;case"top":g="0 0 5px 0";break;case"right":g="0 0 0 5px";break;case"left":g="0 5px 0 0";break}if(modeview==="designer"){let y=a.current.closest("#app-wrapper"),x=y.getBoundingClientRect(),w=window.getComputedStyle(y),S=1,C=1;if(w.transform&&w.transform!=="none"){let k=new DOMMatrix(w.transform);S=k.a,C=k.d}switch(n){case"bottom":m=(d.bottom-x.top)/C+"px";break;case"top":m=(d.top-p.height-x.top)/C+"px";break;case"right":b=(d.right-x.left)/S+"px";break;case"left":b=(d.left-p.width-x.left)/S+"px";break}switch(n){case"bottom":case"top":i==="center"?(b=(d.left+d.width/2-x.left)/S+"px",v="translateX(-50%)"):i==="start"?(b=(d.left-x.left)/S+"px",v="translateX(0)"):i==="end"&&(b=(d.right-x.left)/S+"px",v="translateX(-100%)");break;case"right":case"left":i==="center"?(m=(d.top+d.height/2-x.top)/C+"px",v="translateY(-50%)"):i==="start"?(m=(d.top-x.top)/C+"px",v="translateY(0)"):i==="end"&&(m=(d.bottom-x.top)/C+"px",v="translateY(-100%)");break}}else{switch(n){case"bottom":m=d.bottom+"px";break;case"top":m=d.top-p.height+"px";break;case"right":b=d.right+"px";break;case"left":b=d.left-p.width+"px";break}switch(n){case"bottom":case"top":i==="center"?(b=d.left+d.width/2+"px",v="translateX(-50%)"):i==="start"?(b=d.left+"px",v="translateX(0)"):i==="end"&&(b=d.right+"px",v="translateX(-100%)");break;case"right":case"left":i==="center"?(m=d.top+d.height/2+"px",v="translateY(-50%)"):i==="start"?(m=d.top+"px",v="translateY(0)"):i==="end"&&(m=d.bottom+"px",v="translateY(-100%)");break}}r({top:m,left:b,transform:v,padding:g})};return setTimeout(l,0),e?.current&&N.observe(e.current,l),()=>{e?.current&&N.unobserve(e.current,l)}},[e?.current,a.current,c,n,i,s.value]);let f=l=>{u(e?.current?.contains(l.target)||(a.current?.contains(l.target)??!1))};return M(()=>(window.addEventListener("mouseover",f),()=>window.removeEventListener("mouseover",f)),[a]),modeview!=="designer"&&!c?null:h("div",{class:`dropdown-container ${n} align-${i}`,style:{position:"fixed",top:o.top,left:o.left,transform:o.transform,display:s.value||modeview!="designer"?"block":"none",animation:"overlay-fadeIn 0.2s"},ref:a,children:t})};var ii=({text:t})=>h("div",{class:"empty-component",style:{padding:"4px 8px",border:"1px solid red",backgroundColor:"rgba(255, 0, 0, 0.1)",borderRadius:"4px"},children:["Error Component [",t,"]"]});var Rr=t=>{let e=Y({top:"0px",left:"0px",width:"0px",height:"0px",display:"none"});return M(()=>{if(!t.html)return;let n=()=>{if(!t.html||!document.body.contains(t.html))return;let i=t.html.getBoundingClientRect();e.value={top:`${i.top}px`,left:`${i.left}px`,width:`${i.width}px`,height:`${i.height}px`,display:"block"}};return n(),N.observe(t.html,n),()=>{N.unobserve(t.html,n)}},[t.html]),h("div",{style:{outline:"1px solid rgb(34, 193, 241)",position:"fixed",zIndex:9999,...e.value}})},ri=()=>{let t=R(()=>_.hoveredNodes.value?Object.entries(_.hoveredNodes.value).map(([n,i])=>({id:n,html:i})).filter(n=>_.selectedNodes.value.find(i=>i.html===n.html)==null):[]);return $("hovered",{style:"pointer-events: none"},t.value.map(e=>h(Rr,{html:e.html},e.id)))};var Ae=(t,e)=>{let n={...t};return Object.keys(t).forEach(i=>{let o=t[i];typeof o=="string"&&o.startsWith("${")&&o.endsWith("}")&&(n[i]={...dataset,...e}[o.slice(2,-1)])}),n},oi=({dataset:t,type:e,children:n,id:i,overlay:o,contextDataset:r,parent:s})=>{let a=Y({...t}),c=Y(Ae(t,r)),u=De[e];return M(()=>{let f=_.fieldChange.value;if(f==null||f.id!==i)return;let{fields:l}=f;a.value={...l},c.value={...Ae(l,r)}},[_.fieldChange.value]),M(()=>{let f=Ae(a.value,r);c.value={...f}},[_.vars.value]),$(u,{dataset:c.value,overlay:o,parent:s},n)};var lt=class t{constructor(){this.initial=null;this.threshold=4;this.thresholdMain=6;this.setInitial=e=>{this.initial=e};this.generateGuideLines=()=>{if(!this.initial)return;t.guidesH.value=new Map,t.guidesV.value=new Map;let e={horizontal:new Map,vertical:new Map},n={horizontal:[],vertical:[]},i=this.initial.startTarget.parentElement?.closest(".wmw");if(i){let o=this.getAlignmentPoints(i,{accentMiddle:!0,onlyMiddleLines:!0});n.horizontal.push(...o.horizontal),n.vertical.push(...o.vertical)}this.initial.nodes.forEach(o=>{(o.parentNode==null?[]:Array.from(o.parentNode.children)).forEach(s=>{if(s===this.initial?.startTarget||!s.classList.contains("wmw"))return;let a=this.getAlignmentPoints(s);n.horizontal.push(...a.horizontal),n.vertical.push(...a.vertical)})}),["horizontal","vertical"].forEach(o=>{let r=o;n[r].forEach(s=>{e[r].has(s.value)||e[r].set(s.value,{isMain:s.isMiddle===!0})})}),t.guidesH.value=e.horizontal,t.guidesV.value=e.vertical};this.getAlignmentPoints=(e,n)=>{let i=e.getBoundingClientRect(),o={vertical:[],horizontal:[]};return n?.onlyMiddleLines!==!0&&(o.vertical=[{value:i.left},{value:i.right}],o.horizontal=[{value:i.top},{value:i.bottom}]),o.vertical.push({value:i.left+i.width/2,isMiddle:n?.accentMiddle===!0}),o.horizontal.push({value:i.top+i.height/2,isMiddle:n?.accentMiddle===!0}),o.vertical=o.vertical.map(r=>({...r,value:+r.value.toFixed(2)})),o.horizontal=o.horizontal.map(r=>({...r,value:+r.value.toFixed(2)})),o};this.updateGuidesState=()=>{this.initial==null||this.initial.nodes.length!=1||(t.currentAlignment.value=this.getAlignmentPoints(this.initial.startTarget,{}))}}static{this.guidesH=T(new Map)}static{this.guidesV=T(new Map)}static{this.currentAlignment=T({vertical:[],horizontal:[]})}static{this._instance=null}static instance(){return this._instance||(this._instance=new t),this._instance}stabilizer(e,n){let i=this.initial?.nodes.length==1;if(this.initial==null||!i)return{x:0,y:0};let o=this.initial.nodes[0],[r,s]=[o.clientWidth,o.clientHeight],a=[0,r,r/2].map(d=>+(o.clientLeft+d+e).toFixed(2)),c=[0,s,s/2].map(d=>+(o.clientTop+d+n).toFixed(2)),u=(d,p)=>{for(let m of d)for(let b of p.keys()){let v=m-b,g=p.get(b)?.isMain;if(Math.abs(v)<=(g?this.thresholdMain:this.threshold))return v}return 0},f=u(a,t.guidesV.value),l=u(c,t.guidesH.value);return{x:f,y:l}}clear(){t.guidesH.value=new Map,t.guidesV.value=new Map,t.currentAlignment.value={vertical:[],horizontal:[]}}},si=({isMain:t,isVertical:e,distance:n})=>{let i=R(()=>lt.currentAlignment.value[e?"vertical":"horizontal"]),[o,r]=z("");return M(()=>{i.value.some(s=>Math.abs(s.value-n)<=.5)?r("active"):r("")},[i.value]),h("div",{class:`hhh guide-${e?"vertical":"horizontal"} ${t?"middle":""} ${o}`,style:e?{left:n+"px"}:{top:n+"px"}})},ai=()=>{let t=R(()=>Array.from(lt.guidesH.value.entries()).map(([n,i])=>({key:n,isMain:i.isMain}))),e=R(()=>Array.from(lt.guidesV.value.entries()).map(([n,i])=>({key:n,isMain:i.isMain})));return h("div",{id:"visualize-helper",children:[t.value.map(({key:n,isMain:i})=>h(si,{isMain:i,isVertical:!1,distance:n},n)),e.value.map(({key:n,isMain:i})=>h(si,{isMain:i,isVertical:!0,distance:n},n))]})};var ct=class t{static{this.patternCache=new Map}static{this.getPatternCacheKey=(e,n,i)=>`${e}_${n}_${i}`}static{this.createPattern=(e,n,i,o)=>{let r=t.getPatternCacheKey(n,i,o);if(t.patternCache.has(r))return t.patternCache.get(r)||null;let s=document.createElement("canvas"),a=s.getContext("2d");if(!a)return null;let c=30*n;s.width=c,s.height=c,a.clearRect(0,0,c,c),a.fillStyle=i,a.globalAlpha=o,a.beginPath(),a.strokeStyle=i,a.lineWidth=1,a.globalAlpha=o;let u=5*n;for(let l=0;l<=c*2;l+=u)a.moveTo(l,0),a.lineTo(l-c,c),a.moveTo(0,l),a.lineTo(c,l-c);a.stroke();let f=e.createPattern(s,"repeat");return f&&t.patternCache.set(r,f),f}}static{this.drawGridGaps=(e,n,i,o,r,s,a,c)=>{let u=window.getComputedStyle(c),f=c.getBoundingClientRect(),l=Array.from(c.querySelectorAll("[data-grid-col]")).map(p=>{let m=p.getBoundingClientRect();return{left:m.left-f.left,width:m.width}}).sort((p,m)=>p.left-m.left),d=Array.from(c.querySelectorAll("[data-grid-row]")).map(p=>{let m=p.getBoundingClientRect();return{top:m.top-f.top,height:m.height}}).sort((p,m)=>p.top-m.top);if(l.length===0||d.length===0){let p=u.gridTemplateColumns.split(" "),m=u.gridTemplateRows.split(" ");if(p.length<=1&&m.length<=1)return;if(e.fillStyle=a,s.columnGap>0&&p.length>1){let b=0;p.forEach(x=>{let w=parseFloat(x);isNaN(w)||(b+=w)});let g=o/(b+s.columnGap*(p.length-1)),y=n;for(let x=0;x<p.length;x++){let w=parseFloat(p[x])*g;if(!isNaN(w)&&(y+=w,x<p.length-1)){let S=s.columnGap*g;e.fillRect(y,i,S,r),y+=S}}}if(s.rowGap>0&&m.length>1){let b=0;m.forEach(x=>{let w=parseFloat(x);isNaN(w)||(b+=w)});let g=r/(b+s.rowGap*(m.length-1)),y=i;for(let x=0;x<m.length;x++){let w=parseFloat(m[x])*g;if(!isNaN(w)&&(y+=w,x<m.length-1)){let S=s.rowGap*g;e.fillRect(n,y,o,S),y+=S}}}}else{if(e.fillStyle=a,s.columnGap>0&&l.length>1)for(let p=0;p<l.length-1;p++){let m=l[p],b=l[p+1],v=m.left+m.width,g=b.left-v;g>0&&e.fillRect(n+v,i,g,r)}if(s.rowGap>0&&d.length>1)for(let p=0;p<d.length-1;p++){let m=d[p],b=d[p+1],v=m.top+m.height,g=b.top-v;g>0&&e.fillRect(n,i+v,o,g)}}}}static{this.drawFlexGaps=(e,n,i,o,r,s,a,c)=>{let l=window.getComputedStyle(c).flexDirection.includes("column"),d=Array.from(c.children).filter(v=>{let g=window.getComputedStyle(v);return g.position==="relative"||g.position==="static"});if(d.length<=1)return;let p=c.getBoundingClientRect(),m=p.width/c.offsetWidth,b=p.height/c.offsetHeight;if(e.fillStyle="#8B5CF6",e.globalAlpha=.2,l){if(s.rowGap>0){let v=0;for(let g=0;g<d.length;g++){let x=d[g].getBoundingClientRect(),w=c.getBoundingClientRect(),S=x.top-w.top-s.top*b;g>0&&S>v&&e.fillRect(0,i+v,o,S-v),v=S+x.height}}}else if(s.columnGap>0){let v=0;for(let g=0;g<d.length;g++){let x=d[g].getBoundingClientRect(),w=c.getBoundingClientRect(),S=x.left-w.left-s.left*m;g>0&&S>v&&e.fillRect(n+v,0,S-v,r),v=S+x.width}}e.globalAlpha=1}}};var li=t=>{let e=Y({top:"0px",left:"0px",width:"0px",height:"0px"}),n=O(null),i=R(()=>_.selectedNodes.value.length>1),o=R(()=>_.triggerAction.value!=null||i.value?"hidden":"visible");return M(()=>{if(!t.html)return;let r=()=>{if(!t.html||!document.body.contains(t.html))return;let s=t.html,a=s.getBoundingClientRect(),c=s.offsetHeight,u=s.offsetWidth,f=a.width/u,l=a.height/c,d=U.getElementProps(t.html);if(e.value={top:`${a.top}px`,left:`${a.left}px`,width:`${a.width}px`,height:`${a.height}px`},n.current){let p=n.current.getContext("2d");if(!p)return;n.current.width=a.width,n.current.height=a.height,p.clearRect(0,0,n.current.width,n.current.height),p.save();let m=ct.createPattern(p,1,"#EC4899",.2),b=ct.createPattern(p,1,"#8B5CF6",.2);if(!m||!b)return;p.fillStyle=m,p.fillRect(0,0,a.width,a.height);let v=d.left*f,g=d.top*l,y=a.width-(d.left+d.right)*f,x=a.height-(d.top+d.bottom)*l;p.clearRect(v,g,y,x),d.display==="grid"&&(d.rowGap>0||d.columnGap>0)?ct.drawGridGaps(p,v,g,y,x,d,b,t.html):d.display==="flex"&&(d.rowGap>0||d.columnGap>0)&&ct.drawFlexGaps(p,v,g,a.width,a.height,d,b,t.html),p.restore()}};return r(),N.observe(t.html,r),()=>{N.unobserve(t.html,r)}},[t.html]),h("canvas",{ref:n,style:{position:"fixed","z-index":t.index,...e.value,"pointer-events":"none",visibility:o.value}})};var Tr={"-1-1":"nw-resize","0-1":"ns-resize","1-1":"ne-resize","-10":"ew-resize","00":"move",10:"ew-resize","-11":"sw-resize","01":"ns-resize",11:"se-resize"},Z=class t{constructor(){this.sideTrigger=[];this.initial=null;this.hasMetDragThreshold=!1;this.guideLinesHandler=lt.instance();this.mouseDownStart=null;this.handleMouseDown=(e,n,i)=>{e.button!==0||!n||i&&this.isElementDraggable(i)&&(this.hasMetDragThreshold=!1,this.mouseDownStart={clientX:e.clientX,clientY:e.clientY,html:i})};this.handleMove=e=>{if(!this.hasMetDragThreshold&&_.triggerAction.value==null&&(this.hasMetDragThreshold=this.checkDragThreshold(e.clientX,e.clientY),this.hasMetDragThreshold&&this.mouseDownStart&&(_.triggerAction.value="drag",this.initial={nodes:_.selectedNodes.value.filter(a=>this.isElementDraggable(a.html)).map(a=>U.calculeInit(a.html)),clientX:this.mouseDownStart.clientX,clientY:this.mouseDownStart.clientY,startTarget:this.mouseDownStart.html},this.guideLinesHandler.setInitial(this.initial),this.guideLinesHandler.generateGuideLines())),!this.initial||!_.triggerAction.value)return;document.body.classList.add("interaction-enabled");let i=_.triggerAction.value==="radius",o=Math.round(e.clientX-this.initial.clientX),r=Math.round(e.clientY-this.initial.clientY),s=e.shiftKey;if(!i){let a=this.guideLinesHandler.stabilizer(o,r);o-=a.x,r-=a.y}this.initial.nodes.forEach(a=>{let c=a.target,[u,f]=[a.width,a.height],l=a.type==="icon",d=a.position=="absolute",p=a.selfScale||1,m=a.contextScale||1,b=p*m,v=o/b,g=r/b,y=u,x=f,w=a.left,S=a.top;if(i){let W=Math.min(U.maxRadiusValueApply(x,y),Math.max(0,Math.max(v,g)+a.realRadius));c.style.borderRadius=`${W}px`,this.updateInfoBox(`${Math.round(W)}`,e);return}let C=this.sideTrigger.includes("right")?1:this.sideTrigger.includes("left")?-1:0,k=this.sideTrigger.includes("bottom")?1:this.sideTrigger.includes("top")?-1:0;if(document.body.style.cursor=Tr[C.toString()+k.toString()]||"move",y+=v*C,x+=g*k,d){let W=C!==0?(p-C)/2:k===0?p:0,X=k!==0?(p-k)/2:C===0?p:0;w+=v*W,S+=g*X,Object.assign(c.style,{top:`${S}px`,left:`${w}px`,bottom:"unset",right:"unset"})}(l||s)&&(C!=0&&(x=y),k!=0&&(y=x)),c.style.width=`${y}px`,c.style.height=`${x}px`,l&&(c.style.fontSize=`${y}px`),this.initial?.nodes.length===1&&!i&&this.updateInfoBox(`${y.toFixed(2)}\xD7${x.toFixed(2)}`,e)}),i||this.guideLinesHandler.updateGuidesState()};this.handleMouseUp=()=>{if(this.initial!=null&&_.triggerAction.value!=null){Nt.DISABLE_HANDLER_AFTER_TRIGGERS_EVENTS=!0;let e=[];if(_.triggerAction.value=="radius"){let n=this.initial.startTarget,i=n.getAttribute("wmid"),o=getComputedStyle(n),{width:r,height:s}=n.getBoundingClientRect(),a=U.minRadiusValue(o.borderRadius),c=U.maxRadiusValueApply(s,r);a=Math.round(Math.min(a,c)),e.push({id:i,trigger:"radius",style:{radius:a}})}else this.initial.nodes.forEach(n=>{let i=n.target,o=i.getAttribute("wmid"),{percentWidth:r,percentHeight:s}=Hn(i),a=getComputedStyle(i),c=parseFloat(a.right),u=parseFloat(a.bottom),f=i.offsetLeft,l=i.offsetTop,d=i.offsetWidth,p=i.offsetHeight,m=i.parentElement,b=m?.offsetWidth||0,v=m?.offsetHeight||0;if(_.triggerAction.value=="resize"||_.triggerAction.value=="drag"&&this.hasMetDragThreshold){let g={trigger:_.triggerAction.value=="resize"?"resize":"drag",style:{width:+d.toFixed(2),percentWidth:r,height:+p.toFixed(2),percentHeight:s,right:+c.toFixed(2),bottom:+u.toFixed(2),left:+f.toFixed(2),top:+l.toFixed(2),position:n.position,hasWidthChanged:Math.abs(d-n.width)>=.5,hasHeightChanged:Math.abs(p-n.height)>=.5,isNearTop:(v-p)/2>l,isNearLeft:(b-d)/2>f}};e.push({id:o,trigger:g.trigger,style:g.style})}});e.length>0&&_.emitStylesChange(e)}_.triggerAction.value=null,this.sideTrigger=[],this.hasMetDragThreshold=!1,this.initial=null,this.mouseDownStart=null,this.guideLinesHandler.setInitial(null),this.guideLinesHandler.clear(),document.body.style.cursor="unset",document.body.classList.remove("interaction-enabled"),_.infoBox.value={x:0,y:0,text:""}};this.handleResizeStart=(e,n,i)=>{e.stopPropagation(),_.triggerAction.value="resize",this.sideTrigger=i,this.setInitialNodes(n,e),this.guideLinesHandler.setInitial(this.initial),this.guideLinesHandler.generateGuideLines()}}static{this._instance=null}static instance(){return this._instance||(this._instance=new t),this._instance}updateInfoBox(e,n){this.initial&&_.triggerAction.value&&(_.infoBox.value={text:e,x:n.clientX+15,y:n.clientY+10})}checkDragThreshold(e,n){if(!this.mouseDownStart)return!1;let i=Math.abs(e-this.mouseDownStart.clientX),o=Math.abs(n-this.mouseDownStart.clientY);return Math.sqrt(i*i+o*o)>=4}setInitialNodes(e,n){let i=U.calculeInit(e);this.initial={nodes:[i],clientX:n.clientX,clientY:n.clientY,startTarget:e}}isElementDraggable(e){let n=window.getComputedStyle(e).position;return n==="absolute"||n==="fixed"}};var Lr=["top","right","bottom","left"],Hr=["bottom-right","bottom-left","top-right","top-left"],ci={position:"absolute",width:"7px",height:"7px",pointerEvents:"all"},Ar=t=>{let e=R(()=>_.triggerAction.value),n=R(()=>_.selectedNodes.value.length===1),i=Y({top:"0px",left:"0px",width:"0px",height:"0px",radius:"0px",scale:1}),o=Y({width:0,height:0}),r=O(null),s=Y(""),a=f=>{Z.instance().handleResizeStart(f,t.html,Array.from(f.target.classList))};M(()=>{let f=l=>{l.preventDefault(),l.stopPropagation(),_.triggerAction.value="radius",Z.instance().setInitialNodes(t.html,l)};if(r.current){r.current.addEventListener("mousedown",f);let l=U.minRadiusValue(i.value.radius),d=U.calculateRadiusHandlerPosition(l*i.value.scale,o.value.width,o.value.height);Object.assign(r.current.style,d)}return()=>{r.current?.removeEventListener("mousedown",f)}},[r.current,i.value]),M(()=>{if(!t.html)return;let f=[],l=window.getComputedStyle(t.html),d=!["relative","sticky"].includes(l.position),p=t.html.parentElement,m=window.getComputedStyle(p).display==="grid",v=new Xt(t.data,_.device??"").getSizeUnit(),g=v.w.unit,y=v.h.unit,w=t.data.type=="header-text"||m&&!d,S=m&&!d&&g!="px",C=m&&!d&&y!="px";w&&f.push("disable-resize-corner"),S&&f.push("disable-resize-horizontal"),C&&f.push("disable-resize-vertical");let k=f.join(" ");s.value!==k&&(s.value=k);let W=()=>{if(!t.html||!document.body.contains(t.html))return;let X=t.html.getBoundingClientRect(),dt=getComputedStyle(t.html),j=U.getScale(dt.transform),Q={top:`${X.top}px`,left:`${X.left}px`,width:`${X.width}px`,height:`${X.height}px`,radius:dt.borderRadius,scale:j};if(JSON.stringify(Q)!==JSON.stringify(i.value)){let hi={width:+t.html.offsetWidth.toFixed(2),height:+t.html.clientHeight.toFixed(2)};i.value=Q,o.value=hi}};return W(),N.observe(t.html,W),()=>{N.unobserve(t.html,W)}},[t.html]);let c=Lr.map(f=>{let l=f==="top"||f==="bottom"?{width:"100%",left:"0",cursor:"ns-resize"}:{height:"100%",top:"0",cursor:"ew-resize"};return h("div",{class:`${f}-handler ${f}`,style:{...ci,[f]:"-3.5px",...l},onMouseDown:a})}),u=Hr.map(f=>{let l=f.split("-"),d=f==="bottom-left"||f==="top-right"?{cursor:"nesw-resize"}:{cursor:"nwse-resize"};return h("div",{class:`${f}-handler ${f.replace("-"," ")} double-handler`,style:{...ci,...d,[l[0]]:"-3px",[l[1]]:"-3px",visibility:e.value!=null?"hidden":"visible"},onMouseDown:a})});return $("node-handler",{style:{position:"fixed","z-index":t.index,top:i.value.top,left:i.value.left,width:i.value.width,height:i.value.height,"pointer-events":"none"},class:`${e.value=="radius"?"disable-visual-handlers":""} ${s.value}`},h(P,{children:n.value&&h(P,{children:[h("div",{class:"info-node",children:[o.value.width,"\xD7",o.value.height]}),h("div",{ref:r,class:"radius-handler",style:{width:"10px",height:"10px"}}),u,c]})}))},ui=()=>{let t=R(()=>_.selectedNodes.value),e=9999;return $("selected",{style:"pointer-events: none"},h(P,{children:[t.value.map(n=>h(P,{children:[h(li,{id:n.id,html:n.html,index:e+1}),h(Ar,{id:n.id,html:n.html,data:n.data,index:e+1})]})),h(ai,{})]}))};var ut=({action:t,icon:e,classList:n,text:i})=>h("button",{action:t,onClick:()=>_.emitTextFormat(t),class:`text-tools-item text-format ${n??""}`,children:[h("i",{class:e}),i!=null&&h("div",{children:i})]}),Dr=({position:t="bottom"})=>h("div",{class:"custom-dropdown",children:[h("div",{class:"custom-dropdown-header",children:"Tama\xF1o"}),h("div",{class:`custom-dropdown-menu ${t}`,children:Se.map(e=>h(ut,{...e}))})]}),di=()=>{let t=R(()=>_.triggerAction.value==null&&_.selectedNodes.value.length===1&&["header-text","button","paragraph"].includes(_.selectedNodes.value[0].data.type)),e=R(()=>_.selectedNodes.value.some(({data:a})=>a.type==="paragraph")),n=R(()=>_.selectedNodes.value.length>0?_.selectedNodes.value[0].html:null),i=O(null),[o,r]=z("bottom"),s=()=>{if(i.current==null||!t.value){i.current&&(i.current.style.left="-9999px",i.current.style.top="-9999px");return}let a=n.value;if(!a||!document.body.contains(a))return;let c=window.scrollY||document.documentElement.scrollTop,u=window.scrollX||document.documentElement.scrollLeft,f=a.getBoundingClientRect(),l=i.current.getBoundingClientRect(),d=f.left+u+f.width/2-l.width/2,p=f.bottom+c+16,m=f.top+c-l.height-16,b=window.innerHeight,v=f.top>l.height+30,g=b-f.bottom<l.height+30,y=window.innerWidth-f.left-f.width/2<l.width/2,x=f.left+f.width/2<l.width/2,w=d;y?w=window.innerWidth-l.width-16+u:x&&(w=16+u),i.current.style.left=`${w}px`,v?(i.current.style.top=`${m}px`,r("bottom")):(i.current.style.top=`${p}px`,r(g?"top":"bottom"))};return M(()=>{s();let a=n.value;if(a)return N.observe(a,s),()=>{a&&N.unobserve(a,s)}},[n.value,t.value]),t.value?h("div",{id:"text-tools",class:"text-tools",style:{animation:"fadeIn 0.2s",position:"absolute"},ref:i,children:[!e.value&&h(P,{children:[h(ut,{action:"tf-bold",icon:"bi-type-bold"}),h(ut,{action:"tf-italic",icon:"bi-type-italic"}),h("span",{})]}),h(Dr,{position:o}),h("span",{}),h(ut,{action:"tf-text-left",icon:"bi-text-left"}),h(ut,{action:"tf-text-center",icon:"bi-text-center"}),h(ut,{action:"tf-text-right",icon:"bi-text-right"}),h(ut,{action:"tf-text-justify",icon:"bi-justify"})]}):null};var Pe={},te={},Pr=(t,e,n,i)=>{let o=i.clientX,r=i.clientY,s=getComputedStyle(e),c=getComputedStyle(t).position;if(["absolute","fixed"].includes(c))return;let u=s.display==="flex"&&s.flexDirection==="column"||s.display==="block",f=t.offsetTop,l=t.offsetLeft,d=document.createElement("div");Object.assign(d.style,{transform:u?"translateY(-50%)":"translateX(-50%)",outline:"1px solid #00ff44",borderRadius:"0.25rem",backgroundColor:"#00ff4477",zIndex:"var(--z-index)",position:"absolute"}),d.style.setProperty("pointer-events","none","important");let p=20,m=!1,b=!1,v=0,g=0,y=0,x=0,w=()=>{let C=t.getBoundingClientRect();m=r<C.top+C.height/2,b=o<C.left+C.width/2,u?(v=p,g=e.offsetWidth,y=m?f:f+t.offsetHeight,x=0,te[n]=m?"before":"after"):(v=t.offsetHeight,g=p,y=f,x=b?l:l+t.offsetWidth,te[n]=b?"before":"after"),Object.assign(d.style,{height:v+"px",width:g+"px",top:y+"px",left:x+"px"})};w(),t.insertAdjacentElement("afterend",d);let S=C=>{o=C.clientX,r=C.clientY,w()};t.addEventListener("mousemove",S),Pe[n]=()=>{t.removeEventListener("mousemove",S),d.remove(),delete Pe[n],delete te[n]}},fi=()=>{document.addEventListener("dblclick",t=>{J.catchNode(t)&&_.emitMessage("focus")}),document.addEventListener("dragstart",t=>{t.target.closest("a")&&t.preventDefault()}),window.addEventListener("mousedown",t=>{let e=t.target;e===document.body&&_.emitMessage("reset-selection");let n=e?.closest(jt)??null,i=n?.getAttribute(Yt)??null;at.instance().onNodeMouseDown?.(i,t),i&&_.isEnableAdders()&&_.contextMode.value!=="document"&&(e?.closest("placeholder")?_.emitMessage("target-child",{id:i}):_.emitMessage("target-sibling",{id:i,position:te[i]})),Z.instance().handleMouseDown(t,i,n)}),window.addEventListener("mouseup",t=>{let e=J.catchNode(t);Z.instance().handleMouseUp(),e?.id&&!Nt.DISABLE_HANDLER_AFTER_TRIGGERS_EVENTS&&at.instance().onNodeMouseUp?.(e.id,t),Nt.DISABLE_HANDLER_AFTER_TRIGGERS_EVENTS=!1}),window.addEventListener("mouseout",t=>{let e=J.catchNode(t);e!=null&&(_.removeHoveredNode(e.id),Pe[e.id]?.())}),window.addEventListener("mousemove",t=>{Z.instance().handleMove(t)}),window.addEventListener("mouseover",t=>{let e=J.catchNode(t);if(e==null||e.type=="content")return;_.addHoveredNode(e.id,e.html);let n=t.target.closest("placeholder"),i=e.html.parentElement;i&&_.isEnableAdders()&&!n&&_.contextMode.value!=="document"&&Pr(e.html,i,e.id,t)})};async function pi(){let t=document.getElementById("app");if(!t){console.error("No se encontr\xF3 el elemento app");return}let e=t.style.width,n=t.style.maxWidth;t.style.width="auto",t.style.maxWidth="1200px";let i=t.getElementsByTagName("img");await Promise.all(Array.from(i).map(r=>r.complete?Promise.resolve():new Promise((s,a)=>{r.onload=()=>s(),r.onerror=a})));let o=r=>!["helper","overlay","resizer","info","adder","marginManager","borderRadiusManager"].includes(r.tagName?.toLowerCase());try{return await Zt(t,{filter:o,width:1200,style:{width:"1200px",maxWidth:"1200px",overflowX:"hidden"}})}catch(r){console.error("Error al capturar la imagen:",r),alert("Hubo un problema al capturar la imagen. Por favor, int\xE9ntalo de nuevo.")}finally{t.style.width=e,t.style.maxWidth=n}}var De={},Pt=T([]),Nr=t=>{_.emitMessage("editor-tab",{id:t})},kr=({component:t})=>{let e=O(null),n=i=>{_.emitMessage("css-context",{data:t.variant})};return M(()=>{if(e.current!=null)return gt.getInstance().addAppVariant(t.variant,e.current),()=>{gt.getInstance().removeAppVariant(t.variant)}},[e.current]),h("div",{ref:e,class:"app "+t.variant,onMouseDown:n,children:t.nodes})},Ir=()=>h(P,{children:[Pt.value.map((t,e)=>h(kr,{component:t},"app-"+e)),h(An,{})]}),zr=()=>{let t=R(()=>_.infoBox.value);return t.value.text!=""&&h("div",{id:"info-box",style:{left:t.value.x+"px",top:t.value.y+"px"},children:t.value.text})},Fr=()=>{fi();let t=document.createElement("tools");document.body.appendChild(t),Ft(h(P,{children:[h(ri,{}),h(ui,{}),h(di,{}),h(zr,{}),h(Qn,{}),h(gt.Component,{})]}),t),Ft(h(Ir,{}),document.getElementById("app-wrapper")),Object.assign(window,{open:e=>console.log("Blocked open window to "+e),storeComponents:De,modeview:"designer",uuid:be,proxyData:bt,notify:ti,takeScreenShot:pi,editorTab:Nr,addOverlay:Dn,removeOverlay:Pn,__sysc:{DropdownContainer:ni,DialogContainer:ei,ProxyComponent:oi,EmptyComponent:ii},DESIGNER_MEDIATOR:_.instance()}),Object.assign(window,{h:$,render:Ft,useState:z,useRef:O,useEffect:M,useCallback:an,useMemo:et,Link:En}),_.sandboxCreated()};Fr();})();
